!function(){"use strict";function e(e,t){const n=w(),l=p,o=null===g;n.owner=m,m=n,p=n,t=o?function(e,t){g=h,h.changes.reset(),h.updates.reset();try{return e(t)}finally{m=p=g=null}}(e,t):e(t),m=n.owner,p=l,_(n),b(n,e,t,!1),o&&function(e,t){if(h.changes.count>0||h.updates.count>0){h.time++;try{C(h)}finally{g=null,m=e,p=t}}}(m,l)}function t(t,n,l){null===m&&console.warn("computations created without a root or parent will never be disposed");const[o,i]=function(e,t){const n=new r(e);let l;if(t){let o=-1;l=l=>{if(!t(e,l)){const t=h.time;if(t===o)throw new Error(`Conflicting value update: ${l} is not the same as ${e}`);o=t,e=l,n.next(l)}}}else l=n.next.bind(n);return[n.current.bind(n),l]}(n,l);return e(e=>(i(e=t(e)),e),n),o}function n(e,t){let n,l=0===e.length?null:function(){null===o||(null!==g?h.disposes.add(o):N(o))},o=null===l?a:w(),r=p,i=t||m;o!==i&&(o.owner=i),m=o;try{p=null,n=null===l?e():e(l)}finally{p=r,m=o.owner}return _(o),null!==l&&b(o,null,void 0,!0)&&(o=null),n}function l(e){let t,n=p;return p=null,t=e(),p=n,t}function o(e){null===m?console.warn("cleanups created without a root or parent will never be run"):null===m.cleanups?m.cleanups=[e]:m.cleanups.push(e)}class r{constructor(e){this.value=e,this.pending=c,this.log=null}current(){return null!==p&&function(e){null===e.log&&(e.log={node1:null,node1slot:0,nodes:null,nodeslots:null});!function(e){let t,n=p,l=null===n.source1?-1:null===n.sources?0:n.sources.length;null===e.node1?(e.node1=n,e.node1slot=l,t=-1):null===e.nodes?(e.nodes=[n],e.nodeslots=[l],t=0):(t=e.nodes.length,e.nodes.push(n),e.nodeslots.push(l));null===n.source1?(n.source1=e,n.source1slot=t):null===n.sources?(n.sources=[e],n.sourceslots=[t]):(n.sources.push(e),n.sourceslots.push(t))}(e.log)}(this),this.value}next(e){if(null!==g)if(this.pending!==c){if(e!==this.pending)throw new Error("conflicting changes: "+e+" !== "+this.pending)}else this.pending=e,h.changes.add(this);else null!==this.log?(this.pending=e,h.changes.add(this),v()):this.value=e;return e}}function i(){return{fn:null,age:-1,state:u,source1:null,source1slot:0,sources:null,sourceslots:null,owner:null,owned:null,value:void 0,context:void 0,cleanups:null,afters:null}}class s{constructor(){this.items=[],this.count=0}reset(){this.count=0}add(e){this.items[this.count++]=e}run(e){let t=this.items;for(let n=0;n<this.count;n++)e(t[n]),t[n]=null;this.count=0}}let c={},u=0,d=1,f=2,a=i(),h={time:0,changes:new s,updates:new s,disposes:new s},g=null,p=null,m=null,y=null;function w(){let e=y;return null===e?e=i():y=null,e}function b(e,t,n,l){let o,r=l||null===m||m===a?null:m,i=!e.noRecycle&&null===e.source1&&(null===e.owned&&null===e.cleanups||null!==r);if(i){if(y=e,e.owner=null,null!==r){if(null!==e.owned){if(null===r.owned)r.owned=e.owned;else for(o=0;o<e.owned.length;o++)r.owned.push(e.owned[o]);e.owned=null}if(null!==e.cleanups){if(null===r.cleanups)r.cleanups=e.cleanups;else for(o=0;o<e.cleanups.length;o++)r.cleanups.push(e.cleanups[o]);e.cleanups=null}}}else e.fn=t,e.value=n,e.age=h.time,null!==r&&(null===r.owned?r.owned=[e]:r.owned.push(e));return i}function v(){let e=m;h.updates.reset(),h.time++;try{C(h)}finally{g=p=null,m=e}}function C(e){let t=g,n=0;for(g=e,e.disposes.reset();0!==e.changes.count||0!==e.updates.count||0!==e.disposes.count;)if(n>0&&e.time++,e.changes.run(A),e.updates.run(x),e.disposes.run(N),n++>1e5)throw new Error("Runaway clock detected");g=t}function A(e){e.value=e.pending,e.pending=c,e.log&&function(e){let t=e.node1,n=e.nodes;null!==t&&k(t);if(null!==n)for(let e=0,t=n.length;e<t;e++)k(n[e])}(e.log)}function k(e){let t=h.time;e.age<t&&(e.age=t,e.state=d,h.updates.add(e),null!==e.owned&&function e(t){for(let n=0;n<t.length;n++){let l=t[n];l.age=h.time,l.state=u,null!==l.owned&&e(l.owned)}}(e.owned))}function x(e){if(e.state===d){let t=m,n=p;m=p=e,e.state=f,T(e,!1),e.value=e.fn(e.value),e.state=u,_(e),m=t,p=n}}function _(e){let t=e.afters;null!==t&&(Promise.resolve().then(()=>{for(let e=0;e<t.length;e++)t[e]()}),e.afters=null)}function T(e,t){let n,l,o=e.source1,r=e.sources,i=e.sourceslots,s=e.cleanups,c=e.owned;if(null!==s){for(n=0;n<s.length;n++)s[n](t);e.cleanups=null}if(null!==c){for(n=0;n<c.length;n++)N(c[n]);e.owned=null}if(null!==o&&(S(o,e.source1slot),e.source1=null),null!==r)for(n=0,l=r.length;n<l;n++)S(r.pop(),i.pop())}function S(e,t){let n,l,o=e.nodes,r=e.nodeslots;-1===t?e.node1=null:(n=o.pop(),l=r.pop(),t!==o.length&&(o[t]=n,r[t]=l,-1===l?n.source1slot=t:n.sourceslots[l]=t))}function N(e){e.fn=null,e.owner=null,e.afters=null,T(e,!0)}const O=Symbol("solid-node"),j=Symbol("solid-proxy");function M(e){return e[j]||(e[j]=new Proxy(e,I))}function E(e){return null!==e&&"object"==typeof e&&(e.__proto__===Object.prototype||Array.isArray(e))}function P(e){let t,n,l;if(t=null!=e&&e._state)return t;if(!E(e))return e;if(Array.isArray(e)){Object.isFrozen(e)&&(e=e.slice(0));for(let t=0,o=e.length;t<o;t++)(n=P(l=e[t]))!==l&&(e[t]=n)}else{Object.isFrozen(e)&&(e=Object.assign({},e));let t=Object.keys(e);for(let o=0,r=t.length;o<r;o++)(n=P(l=e[t[o]]))!==l&&(e[t[o]]=n)}return e}function B(e){let t=e[O];return t||(e[O]=t={}),t}const I={get(e,t){if("_state"===t)return e;if(t===j||t===O)return;const n=e[t],l=E(n);if(null!==p&&"function"!=typeof n){let o,i;l&&(o=B(n))&&(i=o._||(o._=new r)).current(),(i=(o=B(e))[t]||(o[t]=new r)).current()}return l?M(n):n},set:()=>!0,deleteProperty:()=>!0};function L(e,t,n){if(n=P(n),e[t]===n)return;const l=Array.isArray(e)||!(t in e);void 0===n?delete e[t]:e[t]=n;let o,r=B(e);(o=r[t])&&o.next(),l&&(o=r._)&&o.next()}function $(e,t){const n=Object.keys(t);for(let l=0;l<n.length;l+=1){const o=n[l];L(e,o,t[o])}}function H(e,t,n=[]){if(1===t.length){let l=t[0];if("function"==typeof l&&void 0===(l=l(M(e),n)))return;return void $(e,l)}const l=t.shift(),o=typeof l,r=Array.isArray(e);if(Array.isArray(l))for(let o=0;o<l.length;o++)H(e,[l[o]].concat(t),n.concat([l[o]]));else if(r&&"function"===o)for(let o=0;o<e.length;o++)l(e[o],o)&&H(e,[o].concat(t),n.concat([o]));else if(r&&"object"===o){const{from:o=0,to:r=e.length-1,by:i=1}=l;for(let l=o;l<=r;l+=i)H(e,[l].concat(t),n.concat([l]))}else if(1===t.length){let o=t[0];if("function"==typeof o){const t=e[l];o=o(E(t)?M(t):t,n.concat([l]))}E(e[l])&&E(o)&&!Array.isArray(o)?$(e[l],o):L(e,l,o)}else H(e[l],t,n.concat([l]))}function z(e){return[M(e=P(e||{})),function(...t){!function(e){let t=void 0;if(null!==g)t=e();else{(g=h).changes.reset();try{t=e(),v()}finally{g=null}}}(()=>{if(Array.isArray(t[0]))for(let n=0;n<t.length;n+=1)H(e,t[n]);else H(e,t)})}]}const F=Symbol("fallback");const J=new Set;function R(e){const t=document.createElement("template");if(t.innerHTML=e,t.innerHTML!==e)throw new Error(`Template html does not match input:\n${t.innerHTML}\n${e}`);return t}function V(e,t,n){if(n)for(let e=0;e<n.length;e++)D(t,n[e]);return e(t)}function W(e,t){const n=Object.keys(t);for(let l=0;l<n.length;l++){const o=n[l],r=o.split(/\s+/);for(let n=0;n<r.length;n++)e.classList.toggle(r[n],t[o])}}function q(t,n,l,o){if(void 0===l||o||(o=[]),"function"==typeof n)e((e=o)=>X(t,n(),e,l));else{if(!Array.isArray(n)||!function e(t){for(let n=0,l=t.length;n<l;n++){const l=t[n];if(Array.isArray(l)&&e(l)||"function"==typeof l)return!0}return!1}(n))return X(t,n,o,l);e((e=o)=>X(t,n,e,l))}}function D(e,t){const n=e[t];Object.defineProperty(e,t,{get:()=>n(),enumerable:!0})}function G(e){return e&&(e.model||G(e.host||e.parentNode))}function K(e){const t=`__${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>n});null!==n;){const l=n[t];if(l){if(l(e,l.length>1?G(n):void 0),e.cancelBubble)return}n=n.host&&n.host instanceof Node?n.host:n.parentNode}}function Q(e,t,n){for(let l=0,o=t.length;l<o;l++)e.insertBefore(t[l],n)}function U(e,t,n,l){if(void 0===n)return e.textContent="";const o=l||document.createTextNode("");if(t.length){o!==t[0]&&e.replaceChild(o,t[0]);for(let n=t.length-1;n>0;n--)e.removeChild(t[n])}else e.insertBefore(o,n);return[o]}function X(t,n,l,o){if(n===l)return l;const r=typeof n,i=void 0!==o;if(t=i&&l[0]&&l[0].parentNode||t,"string"===r||"number"===r)if("number"===r&&(n=n.toString()),i){let e=l[0];e&&3===e.nodeType?e.data=n:e=document.createTextNode(n),l=U(t,l,o,e)}else l=""!==l&&"string"==typeof l?t.firstChild.data=n:t.textContent=n;else if(null==n||"boolean"===r)l=U(t,l,o);else if("function"===r)e(()=>l=X(t,n(),l,o));else if(Array.isArray(n)){const e=function e(t,n){for(let l=0,o=n.length;l<o;l++){let o,r=n[l];if(r instanceof Node)t.push(r);else if(null==r||!0===r||!1===r);else if(Array.isArray(r))e(t,r);else if("string"==(o=typeof r))t.push(document.createTextNode(r));else if("function"===o){const n=r();e(t,Array.isArray(n)?n:[n])}else t.push(document.createTextNode(r.toString()))}return t}([],n);if(0===e.length){if(l=U(t,l,o),i)return l}else Array.isArray(l)?0===l.length?Q(t,e,o):Z(t,l,e):null==l||""===l?Q(t,e):Z(t,i&&l||[t.firstChild],e);l=e}else if(n instanceof Node){if(Array.isArray(l)){if(i)return l=U(t,l,o,n);U(t,l,null,n)}else null==l||""===l?t.appendChild(n):t.replaceChild(n,t.firstChild);l=n}return l}var Y=-1;function Z(e,t,n){var l,o=n.length,r=0,i=t.length-1,s=0,c=o-1,u=t[r],d=n[s],f=t[i],a=n[c],h=f.nextSibling,g=!0;e:for(;g;){for(g=!1;d===u;){if(r++,++s>c||r>i)break e;d=n[s],u=t[r]}for(;a===f;){if(h=f,i--,s>--c||r>i)break e;a=n[c],f=t[i]}for(;d===f;){if(g=!0,e.insertBefore(f,u),i--,++s>c||r>i)break e;d=n[s],f=t[i]}for(;a===u;){if(g=!0,null===h?e.appendChild(u):e.insertBefore(u,h),h=u,r++,s>--c||r>i)break e;a=n[c],u=t[r]}}if(s>c){for(;r<=i;)e.removeChild(t[i]),i--;return}if(r>i){for(;s<=c;)e.insertBefore(n[s],h),s++;return}const p=new Array(c-s+1);for(let e=s;e<=c;e++)p[e]=Y;const m=new Map;for(let e=s;e<=c;e++)m.set(n[e],e);let y=s+n.length-1-c,w=[];for(let e=r;e<=i;e++)m.has(t[e])?(p[m.get(t[e])]=e,y++):w.push(e);if(0!==y){var b,v=function(e,t){let n=[],l=[],o=-1,r=new Array(e.length);for(let i=t,s=e.length;i<s;i++){let t=e[i];if(t<0)continue;let s=ee(n,t);-1!==s&&(r[i]=l[s]),s===o?(n[++o]=t,l[o]=i):t<n[s+1]&&(n[s+1]=t,l[s+1]=i)}for(let e=l[o];o>=0;e=r[e],o--)n[o]=e;return n}(p,s),C=[],A=t[r],k=v.length-1;for(let e=r;e<=i;e++)C[e]=A,A=A.nextSibling;for(let t=0;t<w.length;t++)e.removeChild(C[w[t]]);for(let t=c;t>=s;t--)v[k]===t?(h=C[p[v[k]]],k--):(b=p[t]===Y?n[t]:C[p[t]],e.insertBefore(b,h),h=b)}else{if(u!==e.firstChild||f!==e.lastChild){for(l=r;l<=i;l++)e.removeChild(t[l]);for(;s<=c;)e.insertBefore(n[s],h),s++;return}for(e.textContent="";s<=c;)e.appendChild(n[s]),s++}}function ee(e,t){var n=-1,l=e.length;if(l>0&&e[l-1]<=t)return l-1;for(;l-n>1;){var o=Math.floor((n+l)/2);e[o]>t?l=o:n=o}return n}const te=(e,t)=>e===t;function ne(e){const t=(r=e.children,i="fallback"in e?()=>e.fallback:void 0,e=>{let t=[],s=[],c=[],u=0;return o(()=>{for(let e=0,t=c.length;e<t;e++)c[e]()}),()=>{let o,d,f=e();return l(()=>{let e,l,r,h,g,p,m,y,w=f.length;if(0===w){if(0!==u){for(o=0;o<u;o++)c[o]();c=[],t=[],s=[],u=0}i&&(t=[F],s[0]=n(e=>(c[0]=e,i())),u=1)}else if(0===u){for(d=0;d<w;d++)t[d]=f[d],s[d]=n(a);u=w}else{for(e=new Map,r=new Array(w),h=new Array(w),g=0,p=Math.min(u,w);g<p&&t[g]===f[g];g++);for(p=u-1,m=w-1;p>=0&&m>=0&&t[p]===f[m];p--,m--)r[m]=s[p],h[m]=c[p];for(l=new Array(m+1),d=m;d>=g;d--)y=f[d],o=e.get(y),l[d]=void 0===o?-1:o,e.set(y,d);for(o=g;o<=p;o++)y=t[o],void 0!==(d=e.get(y))&&-1!==d?(r[d]=s[o],h[d]=c[o],d=l[d],e.set(y,d)):c[o]();for(d=g;d<w;d++)r.hasOwnProperty(d)?(s[d]=r[d],c[d]=h[d]):s[d]=n(a);u=s.length=w,t=f.slice(0)}return s});function a(e){return c[d]=e,r(f[d],d)}}})(()=>e.each);var r,i;return e.transform?e.transform(t):t}function le(e){const n=t(()=>e.when,void 0,te),o="fallback"in e,r=()=>n()?l(()=>e.children):o&&l(()=>e.fallback);return e.transform?e.transform(r):r}const oe="todos-solid";function re(){const[t,n]=function(t){const n=localStorage.getItem(oe),[l,o]=z(n?JSON.parse(n):t);return e(()=>localStorage.setItem(oe,JSON.stringify(l))),[l,o]}({counter:1,todos:[],showMode:"all"});return e(()=>{const e=t.todos.filter(e=>e.completed).length;n({completedCount:e,remainingCount:t.todos.length-e})}),[t,{addTodo:({title:e})=>n(["todos",n=>[{title:e,id:t.counter,completed:!1},...n]],["counter",e=>e+1]),removeTodo:e=>n("todos",t=>t.filter(t=>t.id!==e)),editTodo:e=>n("todos",t.todos.findIndex(t=>t.id===e.id),e),clearCompleted:()=>n("todos",e=>e.filter(e=>!e.completed)),toggleAll:e=>n("todos",t=>t.completed!==e,{completed:e}),setVisibility:e=>n("showMode",e)}]}const ie=R('<section class="todoapp"></section>'),se=R('<header class="header"><h1>todos</h1><input class="new-todo" placeholder="What needs to be done?"></header>'),ce=R('<section class="main"><input id="toggle-all" class="toggle-all" type="checkbox"><label for="toggle-all"></label><ul class="todo-list"></ul></section>'),ue=R('<input class="edit">'),de=R('<li class="todo"><div class="view"><input class="toggle" type="checkbox"><label></label><button class="destroy"></button></div></li>'),fe=R('<button class="clear-completed">Clear completed</button>'),ae=R('<footer class="footer"><span class="todo-count"><strong></strong> left</span><ul class="filters"><li><a href="#/">All</a></li><li><a href="#/active">Active</a></li><li><a href="#/completed">Completed</a></li></ul></footer>'),he=e=>Promise.resolve().then(()=>e.focus()),ge=({addTodo:e})=>(function(){const t=se.content.firstChild.cloneNode(!0);return t.firstChild.nextSibling.__keyup=({target:t,keyCode:n})=>{let l;13===n&&(l=t.value.trim())&&(e({title:l}),t.value="")},t})(),pe=({store:n,editTodo:o,removeTodo:r,toggleAll:i})=>{const[s,c]=z(),u=e=>s.editingTodoId===e,d=e=>c("editingTodoId",e),f=({target:{value:e}},t)=>{let n;s.editingTodoId===t&&(n=e.trim())&&(o({id:t,title:n}),d())},a=({target:{checked:e}},t)=>o({id:t,completed:e}),h=(e,t)=>d(t),g=(e,t)=>r(t),p=(e,t)=>{13===e.keyCode?f(e,t):27===e.keyCode&&d()};return function(){const o=ce.content.firstChild.cloneNode(!0),r=o.firstChild,c=r.nextSibling.nextSibling;var d,m,y;return r.__input=({target:{checked:e}})=>i(e),e(()=>r.checked=!n.remainingCount),q(c,V(ne,{each:()=>(e=>"active"===n.showMode?e.filter(e=>!e.completed):"completed"===n.showMode?e.filter(e=>e.completed):e)(n.todos),transform:(d=()=>s.editingTodoId,m="editing","string"==typeof m&&(y=m,m=(e,t)=>e.classList.toggle(y,t)),n=>{const o=t(n);return e(e=>{const t=d();return e&&m(e,!1),(e=t&&l(o).find(e=>e.model===t))&&m(e,!0),e}),o}),children:e=>me(Object.assign({todo:e,isEditing:u,toggle:a,edit:h,remove:g,doneEditing:p,save:f},{}))},["each"])),o}()},me=({todo:t,isEditing:n,toggle:l,edit:o,remove:r,save:i,doneEditing:s})=>(function(){const c=de.content.firstChild.cloneNode(!0),u=c.firstChild.firstChild,d=u.nextSibling,f=d.nextSibling;return c.model=t.id,e(()=>W(c,{completed:t.completed})),u.__input=l,e(()=>u.checked=t.completed),d.__dblclick=o,q(d,()=>t.title),f.__click=r,q(c,V(le,{when:()=>n(t.id),children:()=>{const e=ue.content.firstChild.cloneNode(!0);return he&&he(e),e.__keyup=s,e.__focusout=i,e.value=t.title,e}},["when","children"]),null),c})(),ye=({store:t,clearCompleted:n})=>(function(){const l=ae.content.firstChild.cloneNode(!0),o=l.firstChild,r=o.firstChild,i=r.nextSibling,s=o.nextSibling.firstChild,c=s.firstChild,u=s.nextSibling,d=u.firstChild,f=u.nextSibling.firstChild;return q(r,()=>t.remainingCount),q(o,()=>1===t.remainingCount?" item":" items",i),e(()=>W(c,{selected:"all"===t.showMode})),e(()=>W(d,{selected:"active"===t.showMode})),e(()=>W(f,{selected:"completed"===t.showMode})),q(l,V(le,{when:()=>t.completedCount>0,children:()=>{const e=fe.content.firstChild.cloneNode(!0);return e.__click=n,e}},["when","children"]),null),l})();!function(e,t){let l;n(n=>{l=n,q(t,e())})}(()=>{const[e,{addTodo:t,toggleAll:n,editTodo:l,removeTodo:r,clearCompleted:i,setVisibility:s}]=re(),c=()=>s(location.hash.slice(2)||"all");return window.addEventListener("hashchange",c),o(()=>window.removeEventListener("hashchange",c)),function(){const o=ie.content.firstChild.cloneNode(!0);return q(o,ge({addTodo:t}),null),q(o,V(le,{when:()=>e.todos.length>0,children:()=>[pe(Object.assign({store:e,toggleAll:n,editTodo:l,removeTodo:r},{})),ye({store:e,clearCompleted:i})]},["when","children"]),null),o}()},document.getElementById("main")),function(e){for(let t=0,n=e.length;t<n;t++){const n=e[t];J.has(n)||(J.add(n),document.addEventListener(n,K))}}(["keyup","input","dblclick","click","focusout"])}();
