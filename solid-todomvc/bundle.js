!function(){"use strict";function e(e,t){i(e,t)}function t(e,t,n){var o=i(e,t);return o.comparator=n||null,()=>{if(null!==d){const e=o.state;if(0!=(7&e)&&m(o),o.age===c.time&&8===e)throw new Error("Circular dependency.");0==(16&e)&&(null===o.log&&(o.log={node1:null,node1slot:0,nodes:null,nodeslots:null}),p(o.log))}return o.value}}function n(e,t){t&&(a=t);let n=a,o=d,l=0===e.length?g:i(null,null),r=void 0,s=function(){null!==u?c.disposes.add(l):O(l)};a=l,d=null;try{r=e(s)}finally{d=o,a=n}return r}function o(e){let t,n=d;return d=null,t=e(),d=n,t}function l(e){null===a?console.warn("cleanups created without a root or parent will never be run"):null===a.cleanups?a.cleanups=[e]:a.cleanups.push(e)}class r{constructor(e){this.value=e,this.pending=h,this.log=null}current(){return null!==d&&(null===this.log&&(this.log={node1:null,node1slot:0,nodes:null,nodeslots:null}),p(this.log)),this.value}next(e){if(null!==u)if(this.pending!==h){if(e!==this.pending)throw new Error("conflicting changes: "+e+" !== "+this.pending)}else this.pending=e,c.changes.add(this);else null!==this.log?(this.pending=e,c.changes.add(this),y()):this.value=e;return e}}function i(e,t){const n={fn:e,value:t,age:c.time,state:0,comparator:null,source1:null,source1slot:0,sources:null,sourceslots:null,dependents:null,dependentslot:0,dependentcount:0,owner:a,owned:null,log:null,context:null,cleanups:null};if(null===e)return n;let o=a,l=d;return null===o&&console.warn("computations created without a root or parent will never be disposed"),a=d=n,null===u?function(e){u=c,c.changes.reset(),c.updates.reset();try{e.value=e.fn(e.value),(c.changes.count>0||c.updates.count>0)&&(c.time++,v(c))}finally{u=a=d=null}}(n):n.value=n.fn(n.value),o&&o!==g&&(null===o.owned?o.owned=[n]:o.owned.push(n)),a=o,d=l,n}class s{constructor(){this.items=[],this.count=0}reset(){this.count=0}add(e){this.items[this.count++]=e}run(e){let t=this.items;for(let n=0;n<this.count;n++)e(t[n]),t[n]=null;this.count=0}}let c={time:0,changes:new s,updates:new s,disposes:new s},u=null,d=null,a=null,f=null,h={},g=i(null,null);function p(e){let t,n=d,o=null===n.source1?-1:null===n.sources?0:n.sources.length;if(null===e.node1)e.node1=n,e.node1slot=o,t=-1;else if(null===e.nodes){if(e.node1===n)return;e.nodes=[n],e.nodeslots=[o],t=0}else{if(t=e.nodes.length,e.nodes[t-1]===n)return;e.nodes.push(n),e.nodeslots.push(o)}null===n.source1?(n.source1=e,n.source1slot=t):null===n.sources?(n.sources=[e],n.sourceslots=[t]):(n.sources.push(e),n.sourceslots.push(t))}function m(e){0!=(6&e.state)&&function(e){if(0!=(4&e.state)){const t=e.owner;0!=(7&t.state)&&m(t),e.state&=-5}if(0!=(2&e.state)){const t=e.dependents;for(let n=e.dependentslot,o=e.dependentcount;n<o;n++){const e=t[n];null!=e&&m(e),t[n]=null}e.state&=-3}}(e),0!=(1&e.state)&&w(e),E(e,31)}function y(){let e=a;c.updates.reset(),c.time++;try{v(c)}finally{u=d=null,a=e}}function v(e){let t=u,n=0;for(u=e,e.disposes.reset();0!==e.changes.count||0!==e.updates.count||0!==e.disposes.count;)if(n>0&&e.time++,e.changes.run(b),e.updates.run(w),e.disposes.run(O),n++>1e5)throw new Error("Runaway clock detected");u=t}function b(e){e.value=e.pending,e.pending=h,e.log&&S(e.log,A)}function w(e){const t=e.state;if(0==(16&t))if(0!=(2&t))e.dependents[e.dependentslot++]=null,e.dependentslot===e.dependentcount&&E(e,14);else if(0!=(1&t))if(0!=(4&t))m(e);else if(e.comparator){const t=C(e);(0,e.comparator)(t,e.value)||T(e,!1,!0)}else C(e)}function C(e){const t=e.value,n=a,o=d;return a=d=e,e.state=8,N(e,!1),e.value=e.fn(e.value),E(e,31),a=n,d=o,t}function A(e){const t=c.time;e.age<t&&(e.state|=1,e.age=t,_(e,!!e.comparator))}function k(e){const t=c.time;if(e.age<t){e.state|=2,(e.dependents||(e.dependents=[]))[e.dependentcount++]=f,_(e,!0)}}function x(e){if(0!=(2&e.state)){e.state=1;const t=c.time;e.age<t&&(e.age=t,e.comparator||T(e,!1,!0))}}function _(e,t){if(c.updates.add(e),e.comparator){const t=f;f=e,T(e,!0,!1),f=t}else T(e,t,!1)}function T(e,t,n){const o=e.owned;if(null!==o){!function e(t,n,o){for(let l=0,r=t.length;l<r;l++){const r=t[l];if(null!==r){n?0==(16&r.state)&&(r.state|=4):(r.age=o,r.state=16);const t=r.owned;null!==t&&e(t,n,o)}}}(o,t&&!n,c.time)}const l=e.log;null!==l&&S(l,n?x:t?k:A)}function S(e,t){const n=e.node1,o=e.nodes;if(null!==n&&t(n),null!==o)for(let e=0,n=o.length;e<n;e++)t(o[e])}function N(e,t){let n,o,l=e.source1,r=e.sources,i=e.sourceslots,s=e.cleanups,c=e.owned;if(null!==s){for(n=0;n<s.length;n++)s[n](t);e.cleanups=null}if(null!==c){for(n=0;n<c.length;n++)O(c[n]);e.owned=null}if(null!==l&&(M(l,e.source1slot),e.source1=null),null!==r)for(n=0,o=r.length;n<o;n++)M(r.pop(),i.pop())}function M(e,t){let n,o,l=e.nodes,r=e.nodeslots;-1===t?e.node1=null:(n=l.pop(),o=r.pop(),t!==l.length&&(l[t]=n,r[t]=o,-1===o?n.source1slot=t:n.sourceslots[o]=t))}function E(e,t){e.state&=~t,e.dependentslot=0,e.dependentcount=0}function O(e){e.fn=null,e.log=null,e.dependents=null,N(e,!0),E(e,31)}const j=Symbol("solid-node"),B=Symbol("solid-proxy");function P(e){return e[B]||(e[B]=new Proxy(e,$))}function I(e){return null!=e&&"object"==typeof e&&(e.__proto__===Object.prototype||Array.isArray(e))}function L(e){let t,n,o;if(t=null!=e&&e._state)return t;if(!I(e))return e;if(Array.isArray(e)){Object.isFrozen(e)&&(e=e.slice(0));for(let t=0,l=e.length;t<l;t++)(n=L(o=e[t]))!==o&&(e[t]=n)}else{Object.isFrozen(e)&&(e=Object.assign({},e));let t=Object.keys(e);for(let l=0,r=t.length;l<r;l++)(n=L(o=e[t[l]]))!==o&&(e[t[l]]=n)}return e}function H(e){let t=e[j];return t||(e[j]=t={}),t}const $={get(e,t){if("_state"===t)return e;if(t===B||t===j)return;const n=e[t],o=I(n);if(null!==d&&("function"!=typeof n||e.hasOwnProperty(t))){let l,i;o&&(l=H(n))&&(i=l._||(l._=new r)).current(),(i=(l=H(e))[t]||(l[t]=new r)).current()}return o?P(n):n},set:()=>!0,deleteProperty:()=>!0};function z(e,t,n,o){let l=L(n);if(!o&&e[t]===l)return;const r=Array.isArray(e)||!(t in e);void 0===l?delete e[t]:e[t]=l;let i,s=H(e);(i=s[t])&&i.next(),r&&(i=s._)&&i.next()}function F(e,t,n){const o=Object.keys(t);for(let l=0;l<o.length;l+=1){const r=o[l];z(e,r,t[r],n)}}function J(e,t,n=[],o){if(1===t.length){let l=t[0];if("function"==typeof l&&void 0===(l=l(P(e),n)))return;return void F(e,l,o)}const l=t.shift(),r=typeof l,i=Array.isArray(e);if(Array.isArray(l))for(let r=0;r<l.length;r++)J(e,[l[r]].concat(t),n.concat([l[r]]),o);else if(i&&"function"===r)for(let r=0;r<e.length;r++)l(e[r],r)&&J(e,[r].concat(t),n.concat([r]),o);else if(i&&"object"===r){const{from:r=0,to:i=e.length-1,by:s=1}=l;for(let l=r;l<=i;l+=s)J(e,[l].concat(t),n.concat([l]),o)}else if(1===t.length){let r=t[0];if("function"==typeof r){const t=e[l];r=r(I(t)?P(t):t,n.concat([l]))}I(e[l])&&I(r)&&!Array.isArray(r)?F(e[l],r,o):z(e,l,r,o)}else J(e[l],t,n.concat([l]),o)}function V(e){const t=L(e||{});return[P(t),function(...e){!function(e){let t=void 0;if(null!==u)t=e();else{(u=c).changes.reset();try{t=e(),y()}finally{u=null}}}(()=>{if(Array.isArray(e[0]))for(let n=0;n<e.length;n+=1)J(t,e[n]);else J(t,e)})}]}const R=Symbol("fallback");const W=new Set;function q(e,t){const n=document.createElement("template");if(n.innerHTML=e,n.innerHTML!==e)throw new Error(`Template html does not match input:\n${n.innerHTML}\n${e}`);let o=n.content.firstChild;return t&&(o=o.firstChild),o}function D(e,t,n){if(n)for(let e=0;e<n.length;e++)Q(t,n[e]);return e(t)}function G(e,t){const n=Object.keys(t);for(let o=0;o<n.length;o++){const l=n[o],r=l.split(/\s+/);for(let n=0;n<r.length;n++)e.classList.toggle(r[n],t[l])}}function K(t,n,o,l){if(void 0===o||l||(l=[]),"function"==typeof n)e((e=l)=>ee(t,n(),e,o));else{if(!Array.isArray(n)||!function e(t){for(let n=0,o=t.length;n<o;n++){const o=t[n];if(Array.isArray(o)&&e(o)||"function"==typeof o)return!0}return!1}(n))return ee(t,n,l,o);e((e=l)=>ee(t,n,e,o))}}function Q(e,t){const n=e[t];Object.defineProperty(e,t,{get:()=>n(),enumerable:!0})}function U(e){return e&&(e.model||U(e.host||e.parentNode))}function X(e){const t=`__${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>n});null!==n;){const o=n[t];if(o){if(o(e,o.length>1?U(n):void 0),e.cancelBubble)return}n=n.host&&n.host instanceof Node?n.host:n.parentNode}}function Y(e,t,n){for(let o=0,l=t.length;o<l;o++)e.insertBefore(t[o],n)}function Z(e,t,n,o){if(void 0===n)return e.textContent="";const l=o||document.createTextNode("");if(t.length){l!==t[0]&&e.replaceChild(l,t[0]);for(let n=t.length-1;n>0;n--)e.removeChild(t[n])}else e.insertBefore(l,n);return[l]}function ee(t,n,o,l){if(n===o)return o;const r=typeof n,i=void 0!==l;if(t=i&&o[0]&&o[0].parentNode||t,"string"===r||"number"===r)if("number"===r&&(n=n.toString()),i){let e=o[0];e&&3===e.nodeType?e.data=n:e=document.createTextNode(n),o=Z(t,o,l,e)}else o=""!==o&&"string"==typeof o?t.firstChild.data=n:t.textContent=n;else if(null==n||"boolean"===r)o=Z(t,o,l);else if("function"===r)e(()=>o=ee(t,n(),o,l));else if(Array.isArray(n)){const e=function e(t,n){for(let o=0,l=n.length;o<l;o++){let l,r=n[o];if(r instanceof Node)t.push(r);else if(null==r||!0===r||!1===r);else if(Array.isArray(r))e(t,r);else if("string"==(l=typeof r))t.push(document.createTextNode(r));else if("function"===l){const n=r();e(t,Array.isArray(n)?n:[n])}else t.push(document.createTextNode(r.toString()))}return t}([],n);if(0===e.length){if(o=Z(t,o,l),i)return o}else Array.isArray(o)?0===o.length?Y(t,e,l):ne(t,o,e):null==o||""===o?Y(t,e):ne(t,i&&o||[t.firstChild],e);o=e}else if(n instanceof Node){if(Array.isArray(o)){if(i)return o=Z(t,o,l,n);Z(t,o,null,n)}else null==o||""===o?t.appendChild(n):t.replaceChild(n,t.firstChild);o=n}return o}var te=-1;function ne(e,t,n){var o,l=n.length,r=0,i=t.length-1,s=0,c=l-1,u=t[r],d=n[s],a=t[i],f=n[c],h=a.nextSibling,g=!0;e:for(;g;){for(g=!1;d===u;){if(r++,++s>c||r>i)break e;d=n[s],u=t[r]}for(;f===a;){if(h=a,i--,s>--c||r>i)break e;f=n[c],a=t[i]}for(;d===a;){if(g=!0,e.insertBefore(a,u),i--,++s>c||r>i)break e;d=n[s],a=t[i]}for(;f===u;){if(g=!0,null===h?e.appendChild(u):e.insertBefore(u,h),h=u,r++,s>--c||r>i)break e;f=n[c],u=t[r]}}if(s>c){for(;r<=i;)e.removeChild(t[i]),i--;return}if(r>i){for(;s<=c;)e.insertBefore(n[s],h),s++;return}const p=new Array(c-s+1),m=new Map;for(let e=s;e<=c;e++)p[e]=te,m.set(n[e],e);let y=s+n.length-1-c,v=[];for(let e=r;e<=i;e++)m.has(t[e])?(p[m.get(t[e])]=e,y++):v.push(e);if(0!==y){var b,w=function(e,t){let n=[],o=[],l=-1,r=new Array(e.length);for(let i=t,s=e.length;i<s;i++){let t=e[i];if(t<0)continue;let s=oe(n,t);-1!==s&&(r[i]=o[s]),s===l?(n[++l]=t,o[l]=i):t<n[s+1]&&(n[s+1]=t,o[s+1]=i)}for(let e=o[l];l>=0;e=r[e],l--)n[l]=e;return n}(p,s),C=[],A=t[r],k=w.length-1;for(let e=r;e<=i;e++)C[e]=A,A=A.nextSibling;for(let t=0;t<v.length;t++)e.removeChild(C[v[t]]);for(let t=c;t>=s;t--)w[k]===t?(h=C[p[w[k]]],k--):(b=p[t]===te?n[t]:C[p[t]],e.insertBefore(b,h),h=b)}else{if(u!==e.firstChild||a!==e.lastChild){for(o=r;o<=i;o++)e.removeChild(t[o]);for(;s<=c;)e.insertBefore(n[s],h),s++;return}for(e.textContent="";s<=c;)e.appendChild(n[s]),s++}}function oe(e,t){var n=-1,o=e.length;if(o>0&&e[o-1]<=t)return o-1;for(;o-n>1;){var l=Math.floor((n+o)/2);e[l]>t?o=l:n=l}return n}const le=(e,t)=>e===t;function re(e){const r=t((i=e.children,s="fallback"in e?()=>e.fallback:void 0,e=>{let t=[],r=[],c=[],u=0;return l(()=>{for(let e=0,t=c.length;e<t;e++)c[e]()}),()=>{let l,d,a=e()||[];return o(()=>{let e,o,i,h,g,p,m,y,v=a.length;if(0===v){if(0!==u){for(l=0;l<u;l++)c[l]();c=[],t=[],r=[],u=0}s&&(t=[R],r[0]=n(e=>(c[0]=e,s())),u=1)}else if(0===u){for(d=0;d<v;d++)t[d]=a[d],r[d]=n(f);u=v}else{for(i=new Array(v),h=new Array(v),g=0,p=Math.min(u,v);g<p&&t[g]===a[g];g++);for(p=u-1,m=v-1;p>=g&&m>=g&&t[p]===a[m];p--,m--)i[m]=r[p],h[m]=c[p];if(g>m){for(d=p;g<=d;d--)c[d]();const e=p-g+1;return e>0&&(r.splice(g,e),c.splice(g,e)),t=a.slice(0),u=v,r}if(g>p){for(d=g;d<=m;d++)r[d]=n(f);for(;d<v;d++)r[d]=i[d],c[d]=h[d];return t=a.slice(0),u=v,r}for(e=new Map,o=new Array(m+1),d=m;d>=g;d--)y=a[d],l=e.get(y),o[d]=void 0===l?-1:l,e.set(y,d);for(l=g;l<=p;l++)y=t[l],void 0!==(d=e.get(y))&&-1!==d?(i[d]=r[l],h[d]=c[l],d=o[d],e.set(y,d)):c[l]();for(d=g;d<v;d++)d in i?(r[d]=i[d],c[d]=h[d]):r[d]=n(f);u=r.length=v,t=a.slice(0)}return r});function f(e){return c[d]=e,i(a[d],d)}}})(()=>e.each));var i,s;return e.transform?e.transform(r,()=>e.each):r}function ie(e){const n="fallback"in e,l=t(()=>e.when,void 0,le),r=t(()=>l()?o(()=>e.children):n?o(()=>e.fallback):void 0);return e.transform?e.transform(r,l):r}const se="todos-solid";function ce(){const[t,n]=function(t){const n=localStorage.getItem(se),[o,l]=V(n?JSON.parse(n):t);return e(()=>localStorage.setItem(se,JSON.stringify(o))),[o,l]}({counter:1,todos:[],showMode:"all"});return e(()=>{const e=t.todos.filter(e=>e.completed).length;n({completedCount:e,remainingCount:t.todos.length-e})}),[t,{addTodo:({title:e})=>n(["todos",n=>[{title:e,id:t.counter,completed:!1},...n]],["counter",e=>e+1]),removeTodo:e=>n("todos",t=>t.filter(t=>t.id!==e)),editTodo:e=>n("todos",t.todos.findIndex(t=>t.id===e.id),e),clearCompleted:()=>n("todos",e=>e.filter(e=>!e.completed)),toggleAll:e=>n("todos",t=>t.completed!==e,{completed:e}),setVisibility:e=>n("showMode",e)}]}const ue=q('<section class="todoapp"></section>'),de=q('<header class="header"><h1>todos</h1><input class="new-todo" placeholder="What needs to be done?"></header>'),ae=q('<section class="main"><input id="toggle-all" class="toggle-all" type="checkbox"><label for="toggle-all"></label><ul class="todo-list"></ul></section>'),fe=q('<input class="edit">'),he=q('<li class="todo"><div class="view"><input class="toggle" type="checkbox"><label></label><button class="destroy"></button></div></li>'),ge=q('<button class="clear-completed">Clear completed</button>'),pe=q('<footer class="footer"><span class="todo-count"><strong></strong> left</span><ul class="filters"><li><a href="#/">All</a></li><li><a href="#/active">Active</a></li><li><a href="#/completed">Completed</a></li></ul></footer>'),me=e=>Promise.resolve().then(()=>e.focus()),ye=({addTodo:e})=>(function(){const t=de.cloneNode(!0);return t.firstChild.nextSibling.__keyup=({target:t,keyCode:n})=>{const o=t.value.trim();13===n&&o&&(e({title:o}),t.value="")},t})(),ve=({store:t,editTodo:n,removeTodo:l,toggleAll:r})=>{const[i,s]=V(),c=e=>i.editingTodoId===e,u=e=>s("editingTodoId",e),d=({target:{value:e}},t)=>{const o=e.trim();i.editingTodoId===t&&o&&(n({id:t,title:o}),u())},a=({target:{checked:e}},t)=>n({id:t,completed:e}),f=(e,t)=>u(t),h=(e,t)=>l(t),g=(e,t)=>{13===e.keyCode?d(e,t):27===e.keyCode&&u()},p=function(t,n){var l;return"string"==typeof n&&(l=n,n=(e,t)=>e.classList.toggle(l,t)),l=>(e(e=>{const r=t();return e&&n(e,!1),(e=r&&o(l).find(e=>e.model===r))&&n(e,!0),e}),l)}(()=>i.editingTodoId,"editing");return function(){const n=ae.cloneNode(!0),o=n.firstChild,l=o.nextSibling.nextSibling;return o.__input=({target:{checked:e}})=>r(e),K(l,D(re,{each:()=>(e=>"active"===t.showMode?e.filter(e=>!e.completed):"completed"===t.showMode?e.filter(e=>e.completed):e)(t.todos),transform:p,children:e=>be({todo:e,isEditing:c,toggle:a,edit:f,remove:h,doneEditing:g,save:d})},["each"])),e(()=>o.checked=!t.remainingCount),n}()},be=({todo:t,isEditing:n,toggle:o,edit:l,remove:r,save:i,doneEditing:s})=>(function(){const c=he.cloneNode(!0),u=c.firstChild.firstChild,d=u.nextSibling,a=d.nextSibling;return u.__input=o,d.__dblclick=l,K(d,()=>t.title),a.__click=r,K(c,D(ie,{when:()=>n(t.id),children:()=>{const n=fe.cloneNode(!0);return me&&me(n),n.__keyup=s,n.__focusout=i,e(()=>n.value=t.title),n}},["when","children"]),null),e(()=>{c.model=t.id,G(c,{completed:t.completed}),u.checked=t.completed}),c})(),we=({store:t,clearCompleted:n})=>(function(){const o=pe.cloneNode(!0),l=o.firstChild,r=l.firstChild,i=r.nextSibling,s=l.nextSibling.firstChild,c=s.firstChild,u=s.nextSibling,d=u.firstChild,a=u.nextSibling.firstChild;return K(r,()=>t.remainingCount),K(l,()=>1===t.remainingCount?" item":" items",i),K(o,D(ie,{when:()=>t.completedCount>0,children:()=>{const e=ge.cloneNode(!0);return e.__click=n,e}},["when","children"]),null),e(()=>{G(c,{selected:"all"===t.showMode}),G(d,{selected:"active"===t.showMode}),G(a,{selected:"completed"===t.showMode})}),o})();!function(e,t){let o;n(n=>{o=n,K(t,e())})}(()=>{const[e,{addTodo:t,toggleAll:n,editTodo:o,removeTodo:r,clearCompleted:i,setVisibility:s}]=ce(),c=()=>s(location.hash.slice(2)||"all");return window.addEventListener("hashchange",c),l(()=>window.removeEventListener("hashchange",c)),function(){const l=ue.cloneNode(!0);return K(l,ye({addTodo:t}),null),K(l,D(ie,{when:()=>e.todos.length>0,children:()=>[ve({store:e,toggleAll:n,editTodo:o,removeTodo:r}),we({store:e,clearCompleted:i})]},["when","children"]),null),l}()},document.getElementById("main")),function(e){for(let t=0,n=e.length;t<n;t++){const n=e[t];W.has(n)||(W.add(n),document.addEventListener(n,X))}}(["keyup","input","dblclick","click","focusout"])}();
