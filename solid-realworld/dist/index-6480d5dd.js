const e=(e,t)=>e===t,t=Symbol("error");function n(e,n){n&&(y=n);let r=y,o=v,l=0===e.length?A:h(null,null),i=void 0,s=function(){null!==m?g.disposes.add(l):I(l)};y=l,v=null;try{i=e(s)}catch(e){const n=k(y,t);if(!n)throw e;n.forEach(t=>t(e))}finally{y&&F(y),v=o,y=r}return i}function r(e,t){const n=new d(e);let r;if(t){let o=-1;r=r=>{if(!t(r,e)){const t=g.time;if(t===o)throw new Error(`Conflicting value update: ${r} is not the same as ${e}`);o=t,e=r,n.next(r)}}}else r=n.next.bind(n);return[n.current.bind(n),r]}function o(e,t){h(e,t)}function l(e,t,n){var r=h(e,t);return r.comparator=n||null,()=>{if(null!==v){const e=r.state;if(0!=(7&e)&&j(r),r.age===g.time&&8===e)throw new Error("Circular dependency.");0==(16&e)&&(null===r.log&&(r.log={node1:null,node1slot:0,nodes:null,nodeslots:null}),$(r.log))}return r.value}}function i(e){let t=void 0;if(null!==m)t=e();else{m=g,m.changes.reset();try{t=e(),P()}finally{m=null}}return t}function s(e){let t,n=v;return v=null,t=e(),v=n,t}function c(e){null===y?console.warn("cleanups created outside a `createRoot` or `render` will never be run"):null===y.cleanups?y.cleanups=[e]:y.cleanups.push(e)}function a(){return null!==v}function u(e){const t=Symbol("context");return{id:t,Provider:C(t),defaultValue:e}}function f(e){return k(y,e.id)||e.defaultValue}class d{constructor(e){this.value=e,this.pending=b,this.log=null}current(){return null!==v&&(null===this.log&&(this.log={node1:null,node1slot:0,nodes:null,nodeslots:null}),$(this.log)),this.value}next(e){if(null!==m)if(this.pending!==b){if(e!==this.pending)throw new Error("conflicting changes: "+e+" !== "+this.pending)}else this.pending=e,g.changes.add(this);else null!==this.log?(this.pending=e,g.changes.add(this),P()):this.value=e;return e}}function h(e,n){const r={fn:e,value:n,age:g.time,state:0,comparator:null,source1:null,source1slot:0,sources:null,sourceslots:null,dependents:null,dependentslot:0,dependentcount:0,owner:y,owned:null,log:null,context:null,cleanups:null,afters:null};if(null===e)return r;let o=y,l=v;return null===o&&console.warn("computations created outside a `createRoot` or `render` will never be disposed"),y=v=r,null===m?function(e){m=g,g.changes.reset(),g.updates.reset();try{e.value=e.fn(e.value),(g.changes.count>0||g.updates.count>0)&&(g.time++,N(g))}catch(e){const n=k(y,t);if(!n)throw e;n.forEach(t=>t(e))}finally{y&&F(y),m=y=v=null}}(r):(r.value=r.fn(r.value),F(r)),o&&o!==A&&(null===o.owned?o.owned=[r]:o.owned.push(r)),y=o,v=l,r}class p{constructor(){this.items=[],this.count=0}reset(){this.count=0}add(e){this.items[this.count++]=e}run(e){let n=this.items;for(let r=0;r<this.count;r++)try{const t=n[r];n[r]=null,e(t)}catch(e){const n=k(y,t);if(!n)throw e;n.forEach(t=>t(e))}this.count=0}}let g={time:0,changes:new p,updates:new p,disposes:new p},m=null,v=null,y=null,w=null,b={},A=h(null,null);function k(e,t){return e&&(e.context&&e.context[t]||e.owner&&k(e.owner,t))}function C(e){return function(t){let n;return h(()=>{y.context={[e]:t.value},n=s(()=>function e(t){if("function"==typeof t)return l(()=>e(t()));if(Array.isArray(t)){const n=[];for(let r=0;r<t.length;r++){let o=e(t[r]);Array.isArray(o)?n.push.apply(n,o):n.push(o)}return n}return t}(t.children))}),n}}function $(e){let t,n=v,r=null===n.source1?-1:null===n.sources?0:n.sources.length;if(null===e.node1)e.node1=n,e.node1slot=r,t=-1;else if(null===e.nodes){if(e.node1===n)return;e.nodes=[n],e.nodeslots=[r],t=0}else{if(t=e.nodes.length,e.nodes[t-1]===n)return;e.nodes.push(n),e.nodeslots.push(r)}null===n.source1?(n.source1=e,n.source1slot=t):null===n.sources?(n.sources=[e],n.sourceslots=[t]):(n.sources.push(e),n.sourceslots.push(t))}function j(e){0!=(6&e.state)&&function(e){if(0!=(4&e.state)){const t=e.owner;0!=(7&t.state)&&j(t),e.state&=-5}if(0!=(2&e.state)){const t=e.dependents;for(let n=e.dependentslot,r=e.dependentcount;n<r;n++){const e=t[n];null!=e&&j(e),t[n]=null}e.state&=-3}}(e),0!=(1&e.state)&&S(e),H(e,31)}function P(){let e=y;g.updates.reset(),g.time++;try{N(g)}finally{y&&F(y),m=v=null,y=e}}function N(e){let t=m,n=0;for(m=e,e.disposes.reset();0!==e.changes.count||0!==e.updates.count||0!==e.disposes.count;)if(n>0&&e.time++,e.changes.run(x),e.updates.run(S),e.disposes.run(I),n++>1e5)throw new Error("Runaway clock detected");m=t}function x(e){e.value=e.pending,e.pending=b,e.log&&U(e.log,O)}function S(e){const t=e.state;if(0==(16&t))if(0!=(2&t))e.dependents[e.dependentslot++]=null,e.dependentslot===e.dependentcount&&H(e,14);else if(0!=(1&t))if(0!=(4&t))j(e);else if(e.comparator){const t=_(e);(0,e.comparator)(t,e.value)||B(e,!1,!0)}else _(e)}function _(e){const t=e.value,n=y,r=v;return y=v=e,e.state=8,E(e,!1),e.value=e.fn(e.value),H(e,31),y=n,v=r,t}function O(e){const t=g.time;e.age<t&&(e.state|=1,e.age=t,M(e,!!e.comparator))}function T(e){const t=g.time;if(e.age<t){e.state|=2,(e.dependents||(e.dependents=[]))[e.dependentcount++]=w,M(e,!0)}}function L(e){if(0!=(2&e.state)){e.state=1;const t=g.time;e.age<t&&(e.age=t,e.comparator||B(e,!1,!0))}}function M(e,t){if(g.updates.add(e),e.comparator){const t=w;w=e,B(e,!0,!1),w=t}else B(e,t,!1)}function B(e,t,n){const r=e.owned;if(null!==r){!function e(t,n,r){for(let o=0,l=t.length;o<l;o++){const l=t[o];if(null!==l){n?0==(16&l.state)&&(l.state|=4):(l.age=r,l.state=16);const t=l.owned;null!==t&&e(t,n,r)}}}(r,t&&!n,g.time)}const o=e.log;null!==o&&U(o,n?L:t?T:O)}function U(e,t){const n=e.node1,r=e.nodes;if(null!==n&&t(n),null!==r)for(let e=0,n=r.length;e<n;e++)t(r[e])}function E(e,t){let n,r,o=e.source1,l=e.sources,i=e.sourceslots,s=e.cleanups,c=e.owned;if(null!==s){for(n=0;n<s.length;n++)s[n](t);e.cleanups=null}if(e.context=null,null!==c){for(n=0;n<c.length;n++)I(c[n]);e.owned=null}if(null!==o&&(z(o,e.source1slot),e.source1=null),null!==l)for(n=0,r=l.length;n<r;n++)z(l.pop(),i.pop())}function z(e,t){let n,r,o=e.nodes,l=e.nodeslots;-1===t?e.node1=null:(n=o.pop(),r=l.pop(),t!==o.length&&(o[t]=n,l[t]=r,-1===r?n.source1slot=t:n.sourceslots[r]=t))}function F(e){const t=e.afters;if(null!==t){for(let e=0;e<t.length;e++)t[e]();e.afters=null}}function H(e,t){e.state&=~t,e.dependentslot=0,e.dependentcount=0}function I(e){e.fn=null,e.log=null,e.dependents=null,E(e,!0),H(e,31)}const R=Symbol("state-node"),V=Symbol("state-proxy");function D(e,t){return e[V]||(e[V]=new Proxy(e,t||K))}function J(e){return null!=e&&"object"==typeof e&&(e.__proto__===Object.prototype||Array.isArray(e))}function q(e){let t,n,r;if(t=null!=e&&e._state)return t;if(!J(e))return e;if(Array.isArray(e)){Object.isFrozen(e)&&(e=e.slice(0));for(let t=0,o=e.length;t<o;t++)r=e[t],(n=q(r))!==r&&(e[t]=n)}else{Object.isFrozen(e)&&(e=Object.assign({},e));let t=Object.keys(e);for(let o=0,l=t.length;o<l;o++)r=e[t[o]],(n=q(r))!==r&&(e[t[o]]=n)}return e}function G(e){let t=e[R];return t||(e[R]=t={}),t}const K={get(e,t){if("_state"===t)return e;if(t===V||t===R)return;const n=e[t],r=J(n);if(a()&&("function"!=typeof n||e.hasOwnProperty(t))){let o,l;r&&(o=G(n))&&(l=o._||(o._=new d),l.current()),o=G(e),l=o[t]||(o[t]=new d),l.current()}return r?D(n):n},set:()=>!0,deleteProperty:()=>!0},Q={get(e,t){if("_state"===t)return e;const n=e[t];return J(n)?new Proxy(n,Q):n},set:(e,t,n)=>(W(e,t,q(n)),!0),deleteProperty:(e,t)=>(W(e,t,void 0),!0)};function W(e,t,n,r){if(!r&&e[t]===n)return;const o=Array.isArray(e)||!(t in e);void 0===n?delete e[t]:e[t]=n;let l,i=G(e);(l=i[t])&&l.next(),o&&(l=i._)&&l.next()}function X(e,t,n=[]){let r,o=e;if(t.length>1){r=t.shift();const l=typeof r,i=Array.isArray(e);if(Array.isArray(r)){for(let o=0;o<r.length;o++)X(e,[r[o]].concat(t),[r[o]].concat(n));return}if(i&&"function"===l){for(let o=0;o<e.length;o++)r(e[o],o)&&X(e,[o].concat(t),[o].concat(n));return}if(i&&"object"===l){const{from:o=0,to:l=e.length-1,by:i=1}=r;for(let r=o;r<=l;r+=i)X(e,[r].concat(t),[r].concat(n));return}if(t.length>1)return void X(e[r],t,[r].concat(n));o=e[r],n=[r].concat(n)}let l=t[0];if("function"==typeof l){const e=void 0===r||J(o)?new Proxy(o,Q):o;if(l=l(e,n),l===e||void 0===l)return}l=q(l),void 0===r||J(o)&&J(l)&&!Array.isArray(l)?function(e,t,n){const r=Object.keys(t);for(let o=0;o<r.length;o+=1){const l=r[o];W(e,l,t[l],n)}}(o,l):W(e,r,l)}function Y(e){const t=q(e||{});return[D(t),function(...e){i(()=>X(t,e))}]}const Z=Symbol("fallback");const ee={};function te(){let e=0,t=!1;const[n,o]=r();return[()=>(n(),t),()=>0==e++&&(t=!0,o()),()=>--e<=0&&(t=!1,o())]}const ne=u({}),[re,oe,le]=te();function ie(e){const[t,n]=r(e),[o,l]=r(),[s,c]=r(),a=new Set;let u,d=!1,h=null;function p(e){u=void 0,i(()=>{n(e),d&&(d=!1,c());for(let e of a.keys())e.decrement();a.clear()})}return[function(){const e=f(ne),n=t();if(h)throw h;return o(),u&&e.increment&&!a.has(e)&&(e.increment(),a.add(e)),n},function(e){return h=null,null!=e&&"object"==typeof e&&"then"in e?(u=e,d||(d=!0,i(()=>{c(),l()})),e.then(t=>{u===e&&p(t)},t=>{u===e&&(h=t,p(void 0))})):(u=void 0,p(e)),()=>(s(),d)}]}function se(e){const t=new d,[n,r]=ie(e);return{current:()=>(n(),t.current()),next:t.next.bind(t),load:r}}ne.active=re,ne.increment=oe,ne.decrement=le;const ce={get(e,t){if("_state"===t)return e;if(t===V||t===R)return;const n=e[t],r=J(n);if(a()&&("function"!=typeof n||e.hasOwnProperty(t))){let o,l;r&&(o=G(n))&&(l=o._||(o._=new d),l.current()),o=G(e),l=o[t]||(o[t]=se(n)),l.current()}return r?D(n):n},set:()=>!0,deleteProperty:()=>!0};function ae(e){const t=q(e||{}),n=D(t,ce),r={};function o(...e){i(()=>X(t,e))}return[n,function(e,n){const l=G(t),i=Object.keys(e);for(let s=0;s<i.length;s++){const c=i[s],a=e[c],u=e=>(n?o(n({[c]:e})):W(t,c,e),e),f=(l[c]||(l[c]=se(t[c]))).load(a&&"object"==typeof a&&"then"in a?a.then(u):u(a));!(c in r)&&Object.defineProperty(r,c,{get:()=>f()})}return r},o]}function ue(e){return t=>{const n=ee.hydrate&&ee.hydrate.registry,o=ee.hydrate?{id:`${ee.hydrate.id}.${ee.hydrate.count++}`,count:0,registry:ee.hydrate.registry}:void 0;let i,c,a,u;return n?([i,c]=r(),e().then(e=>c(e.default))):([i,a]=ie(),a(e().then(e=>e.default))),l(()=>(u=i())&&s(()=>{return e=o,ee.hydrate=e,u(t);var e}))}}function fe(e){const[t,n,r]=te();return[t,t=>{const o=ne.transition;ne.transition={timeoutMs:e.timeoutMs,increment:n,decrement:r},n(),t(),r(),function(e){null===y?e():null===y.afters?y.afters=[e]:y.afters.push(e)}(()=>ne.transition=o)}]}function de(e){const{state:t}=f(ne);let n;return t?()=>"suspended"===t()?n:n=e():e}const he=new Set,pe=ee;function ge(e,t){const n=document.createElement("template");n.innerHTML=e,n.innerHTML!==e&&console.warn(`Template html does not match input:\n${n.innerHTML}\n\n${e}`);let r=n.content.firstChild;return t&&(r=r.firstChild),r}function me(e,t,n){if(n)for(let e=0;e<n.length;e++)be(t,n[e]);return s(()=>e(t))}function ve(e){for(let t=0,n=e.length;t<n;t++){const n=e[t];he.has(n)||(he.add(n),document.addEventListener(n,ke))}}function ye(e,t,n){const r=Object.keys(t);for(let o=0,l=r.length;o<l;o++){const l=r[o],i=t[l],s=l.split(/\s+/);if(!n||n[l]!==i)for(let t=0,n=s.length;t<n;t++)e.classList.toggle(s[t],i)}}function we(e,t,n,r){if(void 0===n||r||(r=[]),"function"!=typeof t)return je(e,t,r,n);o(r=>je(e,t(),r,n),r)}function be(e,t){const n=e[t];Object.defineProperty(e,t,{get:()=>n(),enumerable:!0})}function Ae(e){return e&&(e.model||Ae(e.host||e.parentNode))}function ke(e){const t=`__${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>n});null!==n;){const r=n[t];if(r){if(r(e,r.length>1?Ae(n):void 0),e.cancelBubble)return}n=n.host&&n.host instanceof Node?n.host:n.parentNode}}function Ce(e,t,n){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function $e(e,t,n,r){if(void 0===n)return e.textContent="";const o=r||document.createTextNode("");if(t.length){o!==t[0]&&e.replaceChild(o,t[0]);for(let n=t.length-1;n>0;n--)e.removeChild(t[n])}else e.insertBefore(o,n);return[o]}function je(e,t,n,r,l){for(;"function"==typeof n;)n=n();if(t===n)return n;const i=typeof t,s=void 0!==r;if(e=s&&n[0]&&n[0].parentNode||e,"string"===i||"number"===i)if("number"===i&&(t=t.toString()),s){let o=n[0];o&&3===o.nodeType?o.data=t:o=document.createTextNode(t),n=$e(e,n,r,o)}else n=""!==n&&"string"==typeof n?e.firstChild.data=t:e.textContent=t;else if(null==t||"boolean"===i){if(pe.hydrate&&pe.hydrate.registry)return n;n=$e(e,n,r)}else{if("function"===i)return o(()=>n=je(e,t(),n,r)),()=>n;if(Array.isArray(t)){const i=[];if(function e(t,n,r){let o=!1;for(let l=0,i=n.length;l<i;l++){let i,s=n[l];if(s instanceof Node)t.push(s);else if(null==s||!0===s||!1===s);else if(Array.isArray(s))o=e(t,s)||o;else if("string"==(i=typeof s))t.push(document.createTextNode(s));else if("function"===i)if(r){const n=s();o=e(t,Array.isArray(n)?n:[n])||o}else t.push(s),o=!0;else t.push(document.createTextNode(s.toString()))}return o}(i,t,l))return o(()=>n=je(e,i,n,r,!0)),()=>n;if(pe.hydrate&&pe.hydrate.registry)return n;if(0===i.length){if(n=$e(e,n,r),s)return n}else Array.isArray(n)?0===n.length?Ce(e,i,r):Pe(e,n,i):null==n||""===n?Ce(e,i):Pe(e,s&&n||[e.firstChild],i);n=i}else if(t instanceof Node){if(Array.isArray(n)){if(s)return n=$e(e,n,r,t);$e(e,n,null,t)}else null==n||""===n?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Pe(e,t,n){var r,o=n.length,l=0,i=t.length-1,s=0,c=o-1,a=t[l],u=n[s],f=t[i],d=n[c],h=f.nextSibling,p=!0;e:for(;p;){for(p=!1;u===a;){if(l++,++s>c||l>i)break e;u=n[s],a=t[l]}for(;d===f;){if(h=f,i--,s>--c||l>i)break e;d=n[c],f=t[i]}for(;u===f;){if(p=!0,e.insertBefore(f,a),i--,++s>c||l>i)break e;u=n[s],f=t[i]}for(;d===a;){if(p=!0,null===h?e.appendChild(a):e.insertBefore(a,h),h=a,l++,s>--c||l>i)break e;d=n[c],a=t[l]}}if(s>c){for(;l<=i;)e.removeChild(t[i]),i--;return}if(l>i){for(;s<=c;)e.insertBefore(n[s],h),s++;return}const g=new Array(c-s+1),m=new Map;for(let e=s;e<=c;e++)g[e]=-1,m.set(n[e],e);let v=s+n.length-1-c,y=[];for(let e=l;e<=i;e++)m.has(t[e])?(g[m.get(t[e])]=e,v++):y.push(e);if(0!==v){var w,b=function(e,t){let n=[],r=[],o=-1,l=new Array(e.length);for(let i=t,s=e.length;i<s;i++){let t=e[i];if(t<0)continue;let s=Ne(n,t);-1!==s&&(l[i]=r[s]),s===o?(o++,n[o]=t,r[o]=i):t<n[s+1]&&(n[s+1]=t,r[s+1]=i)}for(let e=r[o];o>=0;e=l[e],o--)n[o]=e;return n}(g,s),A=[],k=t[l],C=b.length-1;for(let e=l;e<=i;e++)A[e]=k,k=k.nextSibling;for(let t=0;t<y.length;t++)e.removeChild(A[y[t]]);for(let t=c;t>=s;t--)b[C]===t?(h=A[g[b[C]]],C--):(w=-1===g[t]?n[t]:A[g[t]],e.insertBefore(w,h),h=w)}else{if(a!==e.firstChild||f!==e.lastChild){for(r=l;r<=i;r++)e.removeChild(t[r]);for(;s<=c;)e.insertBefore(n[s],h),s++;return}for(e.textContent="";s<=c;)e.appendChild(n[s]),s++}}function Ne(e,t){var n=-1,r=e.length;if(r>0&&e[r-1]<=t)return r-1;for(;r-n>1;){var o=Math.floor((n+r)/2);e[o]>t?r=o:n=o}return n}const xe=u();function Se(e){let t,n,o,l,i=0,c="running";const[a,u]=r(),d={increment:()=>{1==++i&&(d.initializing?c="fallback":(ne.transition?(c="suspended",!l&&(l=ne.transition).increment(),t=setTimeout(()=>(c="fallback",u()),ne.transition.timeoutMs)):c="fallback",u()),ne.increment())},decrement:()=>{0==--i&&(t&&clearTimeout(t),"running"!==c&&(c="running",l&&l.decrement(),l=void 0,u(),ne.decrement()))},state:()=>(a(),c),initializing:!0},h=f(xe);return h&&([n,o]=h.register(d.state)),me(ne.Provider,{value:d,children:()=>{let t;const r=s(()=>e.children),l=document.createTextNode(""),i=document.implementation.createHTMLDocument();return Object.defineProperty(i.body,"host",{get:()=>l&&l.parentNode}),()=>{const i=d.state(),s=!n||n(),c=!o||o();return d.initializing&&(d.initializing=!1),t&&t(),t=null,"running"===i&&s||"suspended"===i?[l,r]:c?[l,e.fallback]:[l]}}},["children"])}function _e(t){return l(t,void 0,e)}function Oe(e){const t="fallback"in e&&{fallback:()=>e.fallback},r=de(l(function(e,t,r){return"function"!=typeof t?(r=t||{},t=e,o):(r||(r={}),o(e));function o(e){let o=[],l=[],i=[],a=0;return c(()=>{for(let e=0,t=i.length;e<t;e++)i[e]()}),()=>{let c,u,f=e()||[];return s(()=>{let e,t,s,h,p,g,m,v,y=f.length;if(0===y){if(0!==a){for(c=0;c<a;c++)i[c]();i=[],o=[],l=[],a=0}r.fallback&&(o=[Z],l[0]=n(e=>(i[0]=e,r.fallback())),a=1)}else if(0===a){for(u=0;u<y;u++)o[u]=f[u],l[u]=n(d);a=y}else{for(s=new Array(y),h=new Array(y),p=0,g=Math.min(a,y);p<g&&o[p]===f[p];p++);for(g=a-1,m=y-1;g>=p&&m>=p&&o[g]===f[m];g--,m--)s[m]=l[g],h[m]=i[g];if(p>m){for(u=g;p<=u;u--)i[u]();const e=g-p+1;return e>0&&(l.splice(p,e),i.splice(p,e)),o=f.slice(0),a=y,l}if(p>g){for(u=p;u<=m;u++)l[u]=n(d);for(;u<y;u++)l[u]=s[u],i[u]=h[u];return o=f.slice(0),a=y,l}for(e=new Map,t=new Array(m+1),u=m;u>=p;u--)v=f[u],c=e.get(v),t[u]=void 0===c?-1:c,e.set(v,u);for(c=p;c<=g;c++)v=o[c],u=e.get(v),void 0!==u&&-1!==u?(s[u]=l[c],h[u]=i[c],u=t[u],e.set(v,u)):i[c]();for(u=p;u<y;u++)u in s?(l[u]=s[u],i[u]=h[u]):l[u]=n(d);a=l.length=y,o=f.slice(0)}return l});function d(e){return i[u]=e,t(f[u],u)}}}}(()=>e.each,e.children,t||void 0)));return e.transform?e.transform(r):r}function Te(t){const n="fallback"in t,r=l(()=>!!t.when,void 0,e),o=de(l(()=>r()?s(()=>t.children):n?s(()=>t.fallback):void 0));return t.transform?t.transform(o):o}function Le(t){let n=t.children;Array.isArray(n)||(n=[n]);const r="fallback"in t,o=l(()=>{for(let e=0;e<n.length;e++)if(n[e].when)return e;return-1},void 0,e),i=de(l(()=>{const e=o();return s(()=>e<0?r&&t.fallback:n[e].children)}));return t.transform?t.transform(i):i}function Me(e){return e}const Be=encodeURIComponent;function Ue(e,t,n,r,o){const[l,i]=t;t[1]={...i,clear:()=>r({articles:{},page:0}),setPage:e=>r({page:e}),loadArticles(t){const o=function(t){return t.myFeed?e.Articles.feed(l.page,10):t.favoritedBy?e.Articles.favoritedBy(t.favoritedBy,l.page,10):t.tag?e.Articles.byTag(t.tag,l.page,10):t.author?e.Articles.byAuthor(t.author,l.page,10):e.Articles.all(l.page,10,t)}(t).then(({articles:e,articlesCount:t})=>(r({totalPagesCount:Math.ceil(t/10)}),e.reduce((e,t)=>(e[t.slug]=t,e),{})));n({articles:o})},async loadArticle(t,{acceptCached:n=!1}={}){if(n){const e=l.articles[t];if(e)return e}o({[t]:e.Articles.get(t)})},async makeFavorite(t){const n=l.articles[t];if(n&&!n.favorited){r("articles",t,e=>({favorited:!0,favoritesCount:e.favoritesCount+1}));try{await e.Articles.favorite(t)}catch(e){throw r("articles",t,e=>({favorited:!1,favoritesCount:e.favoritesCount-1})),e}}},async unmakeFavorite(t){const n=l.articles[t];if(n&&n.favorited){r("articles",t,e=>({favorited:!1,favoritesCount:e.favoritesCount-1}));try{await e.Articles.unfavorite(t)}catch(e){throw r("articles",t,e=>({favorited:!0,favoritesCount:e.favoritesCount+1})),e}}},async createArticle(t){const{article:n,errors:o}=await e.Articles.create(t);if(o)throw o;return r("articles",{[n.slug]:n}),n},async updateArticle(t){const{article:n,errors:o}=await e.Articles.update(t);if(o)throw o;return r("articles",{[n.slug]:n}),n},async deleteArticle(t){const n=l.articles[t];r("articles",{[t]:void 0});try{await e.Articles.del(t)}catch(e){throw r("articles",{[t]:n}),e}}}}const Ee=["children"],ze=u(),Fe=u();function He(e){const[t,n]=ae(),[l,i,s]=ae({articles:t,page:0,totalPagesCount:0,token:window.localStorage.getItem("jwt"),appName:"Conduit",appLoaded:!1}),a=[l,{}],u=function(e){const[t,n]=r(window.location.hash.slice(2)||e),[o,l]=r(),i=()=>n(window.location.hash.slice(2));let s;return window.addEventListener("hashchange",i),c(()=>window.removeEventListener("hashchange",i)),{location:t,match:(e,n)=>{const r=t().split("?")[0],o=n.exec(r);return o&&(s={params:o.slice(1),routeName:e},l()),!!o},getParams:()=>(o(),s)}}(""),f=function([e,t]){async function n(n,r,o,l){const i={},s={method:n,headers:i};void 0!==o&&(i["Content-Type"]="application/json",s.body=JSON.stringify(o)),e.token&&(i.Authorization=`Token ${e.token}`);try{const e=await fetch("https://conduit.productionready.io/api"+r,s),t=await e.json();return l?t[l]:t}catch(e){return e&&e.response&&401===e.response.status&&t.logout(),e}}const r=(e,t)=>`limit=${e}&offset=${t?t*e:0}`,o=e=>Object.assign({},e,{slug:void 0});return{Articles:{all:(e,t=10)=>n("get",`/articles?${r(t,e)}`),byAuthor:(e,t)=>n("get",`/articles?author=${Be(e)}&${r(5,t)}`),byTag:(e,t,o=10)=>n("get",`/articles?tag=${Be(e)}&${r(o,t)}`),del:e=>n("delete",`/articles/${e}`),favorite:e=>n("post",`/articles/${e}/favorite`),favoritedBy:(e,t)=>n("get",`/articles?favorited=${Be(e)}&${r(5,t)}`),feed:()=>n("get","/articles/feed?limit=10&offset=0"),get:e=>n("get",`/articles/${e}`,void 0,"article"),unfavorite:e=>n("delete",`/articles/${e}/favorite`),update:e=>n("put",`/articles/${e.slug}`,{article:o(e)}),create:e=>n("post","/articles",{article:e})},Auth:{current:()=>n("get","/user",void 0,"user"),login:(e,t)=>n("post","/users/login",{user:{email:e,password:t}}),register:(e,t,r)=>n("post","/users",{user:{username:e,email:t,password:r}}),save:e=>n("put","/user",{user:e})},Comments:{create:(e,t)=>n("post",`/articles/${e}/comments`,{comment:t}),delete:(e,t)=>n("delete",`/articles/${e}/comments/${t}`),forArticle:e=>n("get",`/articles/${e}/comments`,void 0,"comments")},Profile:{follow:e=>n("post",`/profiles/${e}/follow`),get:e=>n("get",`/profiles/${e}`,void 0,"profile"),unfollow:e=>n("delete",`/profiles/${e}/follow`)},Tags:{getAll:()=>n("get","/tags",void 0,"tags")}}}(a);return Ue(f,a,i,s,n),function(e,t,n,r){const[o,l]=t;t[1]={...l,loadComments(t){o.articleSlug!==t&&r({articleSlug:t}),n({comments:e.Comments.forArticle(t)})},async createComment(t){const{errors:n}=await e.Comments.create(o.articleSlug,t);if(n)throw n},async deleteComment(n){const l=o.comments.findIndex(e=>e.id===n);l>-1&&r("comments",e=>[...e.slice(0,l),...e.slice(l+1)]);try{await e.Comments.delete(o.articleSlug,n)}catch(e){throw t[1].loadComments(o.articleSlug),e}}}}(f,a,i,s),function(e,t,n,r){const[l,i]=t;n({tags:e.Tags.getAll().then(e=>e.map(e=>e.toLowerCase()))}),o(()=>{l.token?window.localStorage.setItem("jwt",l.token):window.localStorage.removeItem("jwt")}),t[1]={...i,setToken(e){r({token:e})},setAppLoaded(){r("appLoaded",!0)}}}(f,a,i,s),function(e,t,n,r){const[o,l]=t;t[1]={...l,loadProfile(t){n({profile:e.Profile.get(t)})},async follow(){if(o.profile&&!o.profile.following){r("profile","following",!0);try{await e.Profile.follow(o.profile.username)}catch(e){r("profile","following",!1)}}},async unfollow(){if(o.profile&&o.profile.following){r("profile","following",!1);try{await e.Profile.unfollow(o.profile.username)}catch(e){r("profile","following",!0)}}}}}(f,a,i,s),function(e,t,n,r){let[,o]=t;t[1]=o={...o,async login(t,n){const{user:r,errors:l}=await e.Auth.login(t,n);if(l)throw l;o.setToken(r.token),o.pullUser()},async register(t,n,r){const{user:l,errors:i}=await e.Auth.register(t,n,r);if(i)throw i;o.setToken(l.token),o.pullUser()},logout(){r({token:void 0,currentUser:void 0})},pullUser(){let t;return n({currentUser:t=e.Auth.current()}),t},async updateUser(t){const{user:n,errors:o}=await e.Auth.save(t);if(o)throw o;r({currentUser:n})}}}(f,a,i,s),me(Fe.Provider,{value:u,children:()=>me(ze.Provider,{value:a,children:()=>e.children},Ee)},Ee)}function Ie(){return f(ze)}function Re(){return f(Fe)}const Ve=ge("<a></a>");var De=e=>{const{getParams:t}=Re(),[,n]=fe({timeoutMs:250});return function(){const r=Ve.cloneNode(!0);return r.__click=()=>n(()=>window.scrollTo(0,0)),we(r,()=>e.children),o(n=>{var o;const l=e.class,i={active:e.active||(null===(o=t())||void 0===o?void 0:o.routeName)===e.route},s=n._v$2,c=`#/${e.href||e.route}`;return l!==n._v$&&(r.className=n._v$=l),i!==n._v$2&&ye(r,n._v$2=i,s),c!==n._v$4&&r.setAttribute("href",n._v$4=c),n},{_v$:void 0,_v$2:void 0,_v$4:void 0}),r}()};ve(["click"]);const Je=ge('<i class="ion-compose"></i>'),qe=ge('<li class="nav-item"></li>'),Ge=ge('<i class="ion-gear-a"></i>'),Ke=ge('<nav class="navbar navbar-light"><div class="container"><ul class="nav navbar-nav pull-xs-right"><li class="nav-item"></li></ul></div></nav>'),Qe=["children"],We=["children","href"],Xe=["children","fallback","when"];var Ye=()=>{const[e]=Ie();return function(){const t=Ke.cloneNode(!0),n=t.firstChild,r=n.firstChild,o=r.firstChild;return we(n,me(De,{class:"navbar-brand",route:"",children:()=>e.appName.toLowerCase()},Qe),r),we(o,me(De,{class:"nav-link",route:"",children:()=>"Home"},Qe)),we(r,me(Te,{when:()=>e.currentUser,fallback:()=>[(()=>{const e=qe.cloneNode(!0);return we(e,me(De,{class:"nav-link",route:"login",children:()=>"Sign in"},Qe)),e})(),(()=>{const e=qe.cloneNode(!0);return we(e,me(De,{class:"nav-link",route:"register",children:()=>"Sign up"},Qe)),e})()],children:()=>[(()=>{const e=qe.cloneNode(!0);return we(e,me(De,{class:"nav-link",route:"editor",children:()=>[Je.cloneNode(!0)," New Post"]},Qe)),e})(),(()=>{const e=qe.cloneNode(!0);return we(e,me(De,{class:"nav-link",route:"settings",children:()=>[Ge.cloneNode(!0)," Settings"]},Qe)),e})(),(()=>{const t=qe.cloneNode(!0);return we(t,me(De,{class:"nav-link",route:"profile",href:()=>`@${e.currentUser.username}`,children:()=>e.currentUser.username},We)),t})()]},Xe),null),t}()};const Ze=ue(()=>import("./Home-34ac7e15.js"));function et(){const[e,{loadArticles:t,setPage:n}]=Ie(),{token:r,appName:i}=e,{location:s}=Re(),c=l(()=>{const e=s().split("?")[1];return e?new URLSearchParams(e).get("tab"):r?"feed":"all"}),[,a]=fe({timeoutMs:300}),u=()=>{switch(c()){case"feed":return{myFeed:!0};case"all":return{};default:return{tag:c()}}};return o(()=>a(()=>t(u()))),Ze({handleSetPage:e=>{a(()=>{n(e),t(u())})},appName:i.toLowerCase(),token:r,tab:c,store:e})}const tt=ue(()=>import("./Article-028c3d98.js"));function nt(e){const[,{loadArticle:t,loadComments:n}]=Ie(),r=e.params[0];return t(r,{acceptCached:!0}),n(r),tt({slug:r})}const rt=["username"],ot=ue(()=>import("./Profile-5d9a1bb6.js"));function lt(e){const[,{loadProfile:t,loadArticles:n}]=Ie(),{location:r}=Re();return o(()=>t(e.params[0])),o(()=>r().includes("/favorites")?n({favoritedBy:e.params[0]}):n({author:e.params[0]})),me(ot,{username:()=>e.params[0]},rt)}const it=ue(()=>import("./Editor-2d27411d.js"));function st(e){const[,{loadArticle:t}]=Ie(),n=e.params[0];return n&&t(n,{acceptCached:!0}),it({slug:n})}const ct=ge('<div class="container">Loading...</div>'),at=["children","when"],ut=["children"],ft=["children","fallback"],dt=ue(()=>import("./Settings-309e78b3.js")),ht=ue(()=>import("./Auth-2f52ceb6.js"));var pt=()=>{const[e,{setAppLoaded:t,pullUser:n}]=Ie(),{match:r,getParams:o}=Re();return e.token?n().finally(()=>t()):t(),[me(Ye,{}),me(Te,{when:()=>e.appLoaded,children:()=>me(Se,{fallback:()=>ct.cloneNode(!0),children:()=>me(Le,{children:()=>[me(Me,{when:()=>r("editor",/^editor\/?(.*)/),children:()=>me(st,Object.assign(Object.keys(o()).reduce((e,t)=>(e[t]=()=>o()[t],e),{}),{}),[...Object.keys(o())])},at),me(Me,{when:()=>r("settings",/^settings/),children:()=>me(dt,{})},at),me(Me,{when:()=>r("login",/^login/),children:()=>me(ht,{})},at),me(Me,{when:()=>r("register",/^register/),children:()=>me(ht,{})},at),me(Me,{when:()=>r("article",/^article\/(.*)/),children:()=>me(nt,Object.assign(Object.keys(o()).reduce((e,t)=>(e[t]=()=>o()[t],e),{}),{}),[...Object.keys(o())])},at),me(Me,{when:()=>r("profile",/^@([^/]*)\/?(favorites)?/),children:()=>me(lt,Object.assign(Object.keys(o()).reduce((e,t)=>(e[t]=()=>o()[t],e),{}),{}),[...Object.keys(o())])},at),me(Me,{when:()=>r("",/^#?$/),children:()=>me(et,{})},at)]},ut)},ft)},at)]};const gt=["children"];!function(e,t){let r;n(n=>{r=n,we(t,e())})}(()=>me(He,{children:()=>me(pt,{})},gt),document.body);export{Oe as F,De as N,Te as S,o as a,ye as b,me as c,ve as d,Se as e,Y as f,fe as g,Re as h,we as i,ge as t,Ie as u,_e as w};
