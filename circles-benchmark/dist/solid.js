!function(){"use strict";function e(e,n){t(e,n)}class n{constructor(e){this.value=e,this.pending=c,this.log=null}current(){return null!==s&&(null===this.log&&(this.log={node1:null,node1slot:0,nodes:null,nodeslots:null}),function(e){let n,t=s,o=null===t.source1?-1:null===t.sources?0:t.sources.length;if(null===e.node1)e.node1=t,e.node1slot=o,n=-1;else if(null===e.nodes){if(e.node1===t)return;e.nodes=[t],e.nodeslots=[o],n=0}else{if(n=e.nodes.length,e.nodes[n-1]===t)return;e.nodes.push(t),e.nodeslots.push(o)}null===t.source1?(t.source1=e,t.source1slot=n):null===t.sources?(t.sources=[e],t.sourceslots=[n]):(t.sources.push(e),t.sourceslots.push(n))}(this.log)),this.value}next(e){if(null!==r)if(this.pending!==c){if(e!==this.pending)throw new Error("conflicting changes: "+e+" !== "+this.pending)}else this.pending=e,l.changes.add(this);else null!==this.log?(this.pending=e,l.changes.add(this),d()):this.value=e;return e}}function t(e,n){const t={fn:e,value:n,age:l.time,state:0,comparator:null,source1:null,source1slot:0,sources:null,sourceslots:null,dependents:null,dependentslot:0,dependentcount:0,owner:i,owned:null,log:null,context:null,cleanups:null};if(null===e)return t;let o=i,u=s;return null===o&&console.warn("computations created without a root or parent will never be disposed"),i=s=t,null===r?function(e){r=l,l.changes.reset(),l.updates.reset();try{e.value=e.fn(e.value),(l.changes.count>0||l.updates.count>0)&&(l.time++,h(l))}finally{r=i=s=null}}(t):t.value=t.fn(t.value),o&&o!==f&&(null===o.owned?o.owned=[t]:o.owned.push(t)),i=o,s=u,t}class o{constructor(){this.items=[],this.count=0}reset(){this.count=0}add(e){this.items[this.count++]=e}run(e){let n=this.items;for(let t=0;t<this.count;t++)e(n[t]),n[t]=null;this.count=0}}let l={time:0,changes:new o,updates:new o,disposes:new o},r=null,s=null,i=null,u=null,c={},f=t(null,null);function a(e){0!=(6&e.state)&&function(e){if(0!=(4&e.state)){const n=e.owner;0!=(7&n.state)&&a(n),e.state&=-5}if(0!=(2&e.state)){const n=e.dependents;for(let t=e.dependentslot,o=e.dependentcount;t<o;t++){const e=n[t];null!=e&&a(e),n[t]=null}e.state&=-3}}(e),0!=(1&e.state)&&g(e),B(e,31)}function d(){let e=i;l.updates.reset(),l.time++;try{h(l)}finally{r=s=null,i=e}}function h(e){let n=r,t=0;for(r=e,e.disposes.reset();0!==e.changes.count||0!==e.updates.count||0!==e.disposes.count;)if(t>0&&e.time++,e.changes.run(p),e.updates.run(g),e.disposes.run(j),t++>1e5)throw new Error("Runaway clock detected");r=n}function p(e){e.value=e.pending,e.pending=c,e.log&&x(e.log,m)}function g(e){const n=e.state;if(0==(16&n))if(0!=(2&n))e.dependents[e.dependentslot++]=null,e.dependentslot===e.dependentcount&&B(e,14);else if(0!=(1&n))if(0!=(4&n))a(e);else if(e.comparator){const n=y(e);(0,e.comparator)(n,e.value)||A(e,!1,!0)}else y(e)}function y(e){const n=e.value,t=i,o=s;return i=s=e,e.state=8,C(e,!1),e.value=e.fn(e.value),B(e,31),i=t,s=o,n}function m(e){const n=l.time;e.age<n&&(e.state|=1,e.age=n,b(e,!!e.comparator))}function v(e){const n=l.time;if(e.age<n){e.state|=2,(e.dependents||(e.dependents=[]))[e.dependentcount++]=u,b(e,!0)}}function w(e){if(0!=(2&e.state)){e.state=1;const n=l.time;e.age<n&&(e.age=n,e.comparator||A(e,!1,!0))}}function b(e,n){if(l.updates.add(e),e.comparator){const n=u;u=e,A(e,!0,!1),u=n}else A(e,n,!1)}function A(e,n,t){const o=e.owned;if(null!==o){!function e(n,t,o){for(let l=0,r=n.length;l<r;l++){const r=n[l];if(null!==r){t?0==(16&r.state)&&(r.state|=4):(r.age=o,r.state=16);const n=r.owned;null!==n&&e(n,t,o)}}}(o,n&&!t,l.time)}const r=e.log;null!==r&&x(r,t?w:n?v:m)}function x(e,n){const t=e.node1,o=e.nodes;if(null!==t&&n(t),null!==o)for(let e=0,t=o.length;e<t;e++)n(o[e])}function C(e,n){let t,o,l=e.source1,r=e.sources,s=e.sourceslots,i=e.cleanups,u=e.owned;if(null!==i){for(t=0;t<i.length;t++)i[t](n);e.cleanups=null}if(null!==u){for(t=0;t<u.length;t++)j(u[t]);e.owned=null}if(null!==l&&(k(l,e.source1slot),e.source1=null),null!==r)for(t=0,o=r.length;t<o;t++)k(r.pop(),s.pop())}function k(e,n){let t,o,l=e.nodes,r=e.nodeslots;-1===n?e.node1=null:(t=l.pop(),o=r.pop(),n!==l.length&&(l[n]=t,r[n]=o,-1===o?t.source1slot=n:t.sourceslots[o]=n))}function B(e,n){e.state&=~n,e.dependentslot=0,e.dependentcount=0}function j(e){e.fn=null,e.log=null,e.dependents=null,C(e,!0),B(e,31)}const T=Symbol("solid-node"),_=Symbol("solid-proxy");function N(e){return e[_]||(e[_]=new Proxy(e,E))}function O(e){return null!=e&&"object"==typeof e&&(e.__proto__===Object.prototype||Array.isArray(e))}function S(e){let n,t,o;if(n=null!=e&&e._state)return n;if(!O(e))return e;if(Array.isArray(e)){Object.isFrozen(e)&&(e=e.slice(0));for(let n=0,l=e.length;n<l;n++)(t=S(o=e[n]))!==o&&(e[n]=t)}else{Object.isFrozen(e)&&(e=Object.assign({},e));let n=Object.keys(e);for(let l=0,r=n.length;l<r;l++)(t=S(o=e[n[l]]))!==o&&(e[n[l]]=t)}return e}function M(e){let n=e[T];return n||(e[T]=n={}),n}const E={get(e,t){if("_state"===t)return e;if(t===_||t===T)return;const o=e[t],l=O(o);if(null!==s&&("function"!=typeof o||e.hasOwnProperty(t))){let r,s;l&&(r=M(o))&&(s=r._||(r._=new n)).current(),(s=(r=M(e))[t]||(r[t]=new n)).current()}return l?N(o):o},set:()=>!0,deleteProperty:()=>!0};function $(e,n,t,o){let l=S(t);if(!o&&e[n]===l)return;const r=Array.isArray(e)||!(n in e);void 0===l?delete e[n]:e[n]=l;let s,i=M(e);(s=i[n])&&s.next(),r&&(s=i._)&&s.next()}function F(e,n,t){const o=Object.keys(n);for(let l=0;l<o.length;l+=1){const r=o[l];$(e,r,n[r],t)}}function P(e,n,t=[],o){if(1===n.length){let l=n[0];if("function"==typeof l&&void 0===(l=l(N(e),t)))return;return void F(e,l,o)}const l=n.shift(),r=typeof l,s=Array.isArray(e);if(Array.isArray(l))for(let r=0;r<l.length;r++)P(e,[l[r]].concat(n),t.concat([l[r]]),o);else if(s&&"function"===r)for(let r=0;r<e.length;r++)l(e[r],r)&&P(e,[r].concat(n),t.concat([r]),o);else if(s&&"object"===r){const{from:r=0,to:s=e.length-1,by:i=1}=l;for(let l=r;l<=s;l+=i)P(e,[l].concat(n),t.concat([l]),o)}else if(1===n.length){let r=n[0];if("function"==typeof r){const n=e[l];r=r(O(n)?N(n):n,t.concat([l]))}O(e[l])&&O(r)&&!Array.isArray(r)?F(e[l],r,o):$(e,l,r,o)}else P(e[l],n,t.concat([l]),o)}function H(e){const n=S(e||{});return[N(n),function(...e){!function(e){let n=void 0;if(null!==r)n=e();else{(r=l).changes.reset();try{n=e(),d()}finally{r=null}}}(()=>{if(Array.isArray(e[0]))for(let t=0;t<e.length;t+=1)P(n,e[t]);else P(n,e)})}]}function L(n,t,o,l){if(void 0===o||l||(l=[]),"function"==typeof t)e((e=l)=>R(n,t(),e,o));else{if(!Array.isArray(t)||!function e(n){for(let t=0,o=n.length;t<o;t++){const o=n[t];if(Array.isArray(o)&&e(o)||"function"==typeof o)return!0}return!1}(t))return R(n,t,l,o);e((e=l)=>R(n,t,e,o))}}function z(e,n,t){for(let o=0,l=n.length;o<l;o++)e.insertBefore(n[o],t)}function I(e,n,t,o){if(void 0===t)return e.textContent="";const l=o||document.createTextNode("");if(n.length){l!==n[0]&&e.replaceChild(l,n[0]);for(let t=n.length-1;t>0;t--)e.removeChild(n[t])}else e.insertBefore(l,t);return[l]}function R(n,t,o,l){if(t===o)return o;const r=typeof t,s=void 0!==l;if(n=s&&o[0]&&o[0].parentNode||n,"string"===r||"number"===r)if("number"===r&&(t=t.toString()),s){let e=o[0];e&&3===e.nodeType?e.data=t:e=document.createTextNode(t),o=I(n,o,l,e)}else o=""!==o&&"string"==typeof o?n.firstChild.data=t:n.textContent=t;else if(null==t||"boolean"===r)o=I(n,o,l);else if("function"===r)e(()=>o=R(n,t(),o,l));else if(Array.isArray(t)){const e=function e(n,t){for(let o=0,l=t.length;o<l;o++){let l,r=t[o];if(r instanceof Node)n.push(r);else if(null==r||!0===r||!1===r);else if(Array.isArray(r))e(n,r);else if("string"==(l=typeof r))n.push(document.createTextNode(r));else if("function"===l){const t=r();e(n,Array.isArray(t)?t:[t])}else n.push(document.createTextNode(r.toString()))}return n}([],t);if(0===e.length){if(o=I(n,o,l),s)return o}else Array.isArray(o)?0===o.length?z(n,e,l):D(n,o,e):null==o||""===o?z(n,e):D(n,s&&o||[n.firstChild],e);o=e}else if(t instanceof Node){if(Array.isArray(o)){if(s)return o=I(n,o,l,t);I(n,o,null,t)}else null==o||""===o?n.appendChild(t):n.replaceChild(t,n.firstChild);o=t}return o}var q=-1;function D(e,n,t){var o,l=t.length,r=0,s=n.length-1,i=0,u=l-1,c=n[r],f=t[i],a=n[s],d=t[u],h=a.nextSibling,p=!0;e:for(;p;){for(p=!1;f===c;){if(r++,++i>u||r>s)break e;f=t[i],c=n[r]}for(;d===a;){if(h=a,s--,i>--u||r>s)break e;d=t[u],a=n[s]}for(;f===a;){if(p=!0,e.insertBefore(a,c),s--,++i>u||r>s)break e;f=t[i],a=n[s]}for(;d===c;){if(p=!0,null===h?e.appendChild(c):e.insertBefore(c,h),h=c,r++,i>--u||r>s)break e;d=t[u],c=n[r]}}if(i>u){for(;r<=s;)e.removeChild(n[s]),s--;return}if(r>s){for(;i<=u;)e.insertBefore(t[i],h),i++;return}const g=new Array(u-i+1),y=new Map;for(let e=i;e<=u;e++)g[e]=q,y.set(t[e],e);let m=i+t.length-1-u,v=[];for(let e=r;e<=s;e++)y.has(n[e])?(g[y.get(n[e])]=e,m++):v.push(e);if(0!==m){var w,b=function(e,n){let t=[],o=[],l=-1,r=new Array(e.length);for(let s=n,i=e.length;s<i;s++){let n=e[s];if(n<0)continue;let i=G(t,n);-1!==i&&(r[s]=o[i]),i===l?(t[++l]=n,o[l]=s):n<t[i+1]&&(t[i+1]=n,o[i+1]=s)}for(let e=o[l];l>=0;e=r[e],l--)t[l]=e;return t}(g,i),A=[],x=n[r],C=b.length-1;for(let e=r;e<=s;e++)A[e]=x,x=x.nextSibling;for(let n=0;n<v.length;n++)e.removeChild(A[v[n]]);for(let n=u;n>=i;n--)b[C]===n?(h=A[g[b[C]]],C--):(w=g[n]===q?t[n]:A[g[n]],e.insertBefore(w,h),h=w)}else{if(c!==e.firstChild||a!==e.lastChild){for(o=r;o<=s;o++)e.removeChild(n[o]);for(;i<=u;)e.insertBefore(t[i],h),i++;return}for(e.textContent="";i<=u;)e.appendChild(t[i]),i++}}function G(e,n){var t=-1,o=e.length;if(o>0&&e[o-1]<=n)return o-1;for(;o-t>1;){var l=Math.floor((t+o)/2);e[l]>n?o=l:t=l}return t}function J(e,n){let o;return function(e,n){n&&(i=n);let o=i,u=s,c=0===e.length?f:t(null,null),a=void 0,d=function(){null!==r?l.disposes.add(c):j(c)};i=c,s=null;try{a=e(d)}finally{s=u,i=o}}(t=>{o=t,L(n,e())}),o}const K=function(e,n){const t=document.createElement("template");if(t.innerHTML=e,t.innerHTML!==e)throw new Error(`Template html does not match input:\n${t.innerHTML}\n${e}`);let o=t.content.firstChild;return n&&(o=o.firstChild),o}('<div class="box-view"><div class="box"></div></div>');function Q(e){const n=[];for(let t=0;t<e;t++)n.push({top:0,left:0,color:null,content:0,count:0});return n}function U(e){const n=e.count+1;return{top:10*Math.sin(n/10),left:10*Math.cos(n/10),color:n%255,content:n%100,count:n}}const V=()=>{const[n,t]=H({boxes:Q(Benchmark.number)});return Benchmark.Framework.Solid.loop=()=>Promise.resolve().then(()=>t("boxes",{},U)),n.boxes.map((n,t)=>(function(){const o=K.cloneNode(!0),l=o.firstChild;l.id=t,l.textContent=n.content;const r=l.firstChild;return e(()=>{Object.assign(l.style,{top:`${n.top}px`,left:`${n.left}px`,background:`rgb(0,0,${n.color})`}),r.data=n.content}),o})())};let W;Benchmark.Framework.Solid={start(){W=J(V,document.getElementById("grid"))},cleanup(){W&&W()}}}();
