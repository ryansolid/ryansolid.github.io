!function(){"use strict";function e(e,n){const o=new t(e);let l;if(n){let t=-1;l=l=>{if(!n(e,l)){const n=s.time;if(n===t)throw new Error(`Conflicting value update: ${l} is not the same as ${e}`);t=n,e=l,o.next(l)}}}else l=o.next.bind(o);return[o.current.bind(o),l]}function n(e,n){o(e,n)}class t{constructor(e){this.value=e,this.pending=f,this.log=null}current(){return null!==i&&(null===this.log&&(this.log={node1:null,node1slot:0,nodes:null,nodeslots:null}),function(e){let n,t=i,o=null===t.source1?-1:null===t.sources?0:t.sources.length;if(null===e.node1)e.node1=t,e.node1slot=o,n=-1;else if(null===e.nodes){if(e.node1===t)return;e.nodes=[t],e.nodeslots=[o],n=0}else{if(n=e.nodes.length,e.nodes[n-1]===t)return;e.nodes.push(t),e.nodeslots.push(o)}null===t.source1?(t.source1=e,t.source1slot=n):null===t.sources?(t.sources=[e],t.sourceslots=[n]):(t.sources.push(e),t.sourceslots.push(n))}(this.log)),this.value}next(e){if(null!==r)if(this.pending!==f){if(e!==this.pending)throw new Error("conflicting changes: "+e+" !== "+this.pending)}else this.pending=e,s.changes.add(this);else null!==this.log?(this.pending=e,s.changes.add(this),h()):this.value=e;return e}}function o(e,n){const t={fn:e,value:n,age:s.time,state:0,comparator:null,source1:null,source1slot:0,sources:null,sourceslots:null,dependents:null,dependentslot:0,dependentcount:0,owner:u,owned:null,log:null,context:null,cleanups:null};if(null===e)return t;let o=u,l=i;return null===o&&console.warn("computations created without a root or parent will never be disposed"),u=i=t,null===r?function(e){r=s,s.changes.reset(),s.updates.reset();try{e.value=e.fn(e.value),(s.changes.count>0||s.updates.count>0)&&(s.time++,p(s))}finally{r=u=i=null}}(t):t.value=t.fn(t.value),o&&o!==a&&(null===o.owned?o.owned=[t]:o.owned.push(t)),u=o,i=l,t}class l{constructor(){this.items=[],this.count=0}reset(){this.count=0}add(e){this.items[this.count++]=e}run(e){let n=this.items;for(let t=0;t<this.count;t++)e(n[t]),n[t]=null;this.count=0}}let s={time:0,changes:new l,updates:new l,disposes:new l},r=null,i=null,u=null,c=null,f={},a=o(null,null);function d(e){0!=(6&e.state)&&function(e){if(0!=(4&e.state)){const n=e.owner;0!=(7&n.state)&&d(n),e.state&=-5}if(0!=(2&e.state)){const n=e.dependents;for(let t=e.dependentslot,o=e.dependentcount;t<o;t++){const e=n[t];null!=e&&d(e),n[t]=null}e.state&=-3}}(e),0!=(1&e.state)&&m(e),T(e,31)}function h(){let e=u;s.updates.reset(),s.time++;try{p(s)}finally{r=i=null,u=e}}function p(e){let n=r,t=0;for(r=e,e.disposes.reset();0!==e.changes.count||0!==e.updates.count||0!==e.disposes.count;)if(t>0&&e.time++,e.changes.run(g),e.updates.run(m),e.disposes.run(N),t++>1e5)throw new Error("Runaway clock detected");r=n}function g(e){e.value=e.pending,e.pending=f,e.log&&A(e.log,y)}function m(e){const n=e.state;if(0==(16&n))if(0!=(2&n))e.dependents[e.dependentslot++]=null,e.dependentslot===e.dependentcount&&T(e,14);else if(0!=(1&n))if(0!=(4&n))d(e);else if(e.comparator){const n=v(e);(0,e.comparator)(n,e.value)||x(e,!1,!0)}else v(e)}function v(e){const n=e.value,t=u,o=i;return u=i=e,e.state=8,k(e,!1),e.value=e.fn(e.value),T(e,31),u=t,i=o,n}function y(e){const n=s.time;e.age<n&&(e.state|=1,e.age=n,b(e,!!e.comparator))}function w(e){const n=s.time;if(e.age<n){e.state|=2,(e.dependents||(e.dependents=[]))[e.dependentcount++]=c,b(e,!0)}}function C(e){if(0!=(2&e.state)){e.state=1;const n=s.time;e.age<n&&(e.age=n,e.comparator||x(e,!1,!0))}}function b(e,n){if(s.updates.add(e),e.comparator){const n=c;c=e,x(e,!0,!1),c=n}else x(e,n,!1)}function x(e,n,t){const o=e.owned;if(null!==o){!function e(n,t,o){for(let l=0,s=n.length;l<s;l++){const s=n[l];if(null!==s){t?0==(16&s.state)&&(s.state|=4):(s.age=o,s.state=16);const n=s.owned;null!==n&&e(n,t,o)}}}(o,n&&!t,s.time)}const l=e.log;null!==l&&A(l,t?C:n?w:y)}function A(e,n){const t=e.node1,o=e.nodes;if(null!==t&&n(t),null!==o)for(let e=0,t=o.length;e<t;e++)n(o[e])}function k(e,n){let t,o,l=e.source1,s=e.sources,r=e.sourceslots,i=e.cleanups,u=e.owned;if(null!==i){for(t=0;t<i.length;t++)i[t](n);e.cleanups=null}if(null!==u){for(t=0;t<u.length;t++)N(u[t]);e.owned=null}if(null!==l&&(B(l,e.source1slot),e.source1=null),null!==s)for(t=0,o=s.length;t<o;t++)B(s.pop(),r.pop())}function B(e,n){let t,o,l=e.nodes,s=e.nodeslots;-1===n?e.node1=null:(t=l.pop(),o=s.pop(),n!==l.length&&(l[n]=t,s[n]=o,-1===o?t.source1slot=n:t.sourceslots[o]=n))}function T(e,n){e.state&=~n,e.dependentslot=0,e.dependentcount=0}function N(e){e.fn=null,e.log=null,e.dependents=null,k(e,!0),T(e,31)}function S(e,t,o,l){if(void 0===o||l||(l=[]),"function"==typeof t)n((n=l)=>$(e,t(),n,o));else{if(!Array.isArray(t)||!function e(n){for(let t=0,o=n.length;t<o;t++){const o=n[t];if(Array.isArray(o)&&e(o)||"function"==typeof o)return!0}return!1}(t))return $(e,t,l,o);n((n=l)=>$(e,t,n,o))}}function E(e,n,t){for(let o=0,l=n.length;o<l;o++)e.insertBefore(n[o],t)}function M(e,n,t,o){if(void 0===t)return e.textContent="";const l=o||document.createTextNode("");if(n.length){l!==n[0]&&e.replaceChild(l,n[0]);for(let t=n.length-1;t>0;t--)e.removeChild(n[t])}else e.insertBefore(l,t);return[l]}function $(e,t,o,l){if(t===o)return o;const s=typeof t,r=void 0!==l;if(e=r&&o[0]&&o[0].parentNode||e,"string"===s||"number"===s)if("number"===s&&(t=t.toString()),r){let n=o[0];n&&3===n.nodeType?n.data=t:n=document.createTextNode(t),o=M(e,o,l,n)}else o=""!==o&&"string"==typeof o?e.firstChild.data=t:e.textContent=t;else if(null==t||"boolean"===s)o=M(e,o,l);else if("function"===s)n(()=>o=$(e,t(),o,l));else if(Array.isArray(t)){const n=function e(n,t){for(let o=0,l=t.length;o<l;o++){let l,s=t[o];if(s instanceof Node)n.push(s);else if(null==s||!0===s||!1===s);else if(Array.isArray(s))e(n,s);else if("string"==(l=typeof s))n.push(document.createTextNode(s));else if("function"===l){const t=s();e(n,Array.isArray(t)?t:[t])}else n.push(document.createTextNode(s.toString()))}return n}([],t);if(0===n.length){if(o=M(e,o,l),r)return o}else Array.isArray(o)?0===o.length?E(e,n,l):H(e,o,n):null==o||""===o?E(e,n):H(e,r&&o||[e.firstChild],n);o=n}else if(t instanceof Node){if(Array.isArray(o)){if(r)return o=M(e,o,l,t);M(e,o,null,t)}else null==o||""===o?e.appendChild(t):e.replaceChild(t,e.firstChild);o=t}return o}var L=-1;function H(e,n,t){var o,l=t.length,s=0,r=n.length-1,i=0,u=l-1,c=n[s],f=t[i],a=n[r],d=t[u],h=a.nextSibling,p=!0;e:for(;p;){for(p=!1;f===c;){if(s++,++i>u||s>r)break e;f=t[i],c=n[s]}for(;d===a;){if(h=a,r--,i>--u||s>r)break e;d=t[u],a=n[r]}for(;f===a;){if(p=!0,e.insertBefore(a,c),r--,++i>u||s>r)break e;f=t[i],a=n[r]}for(;d===c;){if(p=!0,null===h?e.appendChild(c):e.insertBefore(c,h),h=c,s++,i>--u||s>r)break e;d=t[u],c=n[s]}}if(i>u){for(;s<=r;)e.removeChild(n[r]),r--;return}if(s>r){for(;i<=u;)e.insertBefore(t[i],h),i++;return}const g=new Array(u-i+1),m=new Map;for(let e=i;e<=u;e++)g[e]=L,m.set(t[e],e);let v=i+t.length-1-u,y=[];for(let e=s;e<=r;e++)m.has(n[e])?(g[m.get(n[e])]=e,v++):y.push(e);if(0!==v){var w,C=function(e,n){let t=[],o=[],l=-1,s=new Array(e.length);for(let r=n,i=e.length;r<i;r++){let n=e[r];if(n<0)continue;let i=F(t,n);-1!==i&&(s[r]=o[i]),i===l?(t[++l]=n,o[l]=r):n<t[i+1]&&(t[i+1]=n,o[i+1]=r)}for(let e=o[l];l>=0;e=s[e],l--)t[l]=e;return t}(g,i),b=[],x=n[s],A=C.length-1;for(let e=s;e<=r;e++)b[e]=x,x=x.nextSibling;for(let n=0;n<y.length;n++)e.removeChild(b[y[n]]);for(let n=u;n>=i;n--)C[A]===n?(h=b[g[C[A]]],A--):(w=g[n]===L?t[n]:b[g[n]],e.insertBefore(w,h),h=w)}else{if(c!==e.firstChild||a!==e.lastChild){for(o=s;o<=r;o++)e.removeChild(n[o]);for(;i<=u;)e.insertBefore(t[i],h),i++;return}for(e.textContent="";i<=u;)e.appendChild(t[i]),i++}}function F(e,n){var t=-1,o=e.length;if(o>0&&e[o-1]<=n)return o-1;for(;o-t>1;){var l=Math.floor((t+o)/2);e[l]>n?o=l:t=l}return t}function j(e,n){let t;return function(e,n){n&&(u=n);let t=u,l=i,c=0===e.length?a:o(null,null),f=void 0,d=function(){null!==r?s.disposes.add(c):N(c)};u=c,i=null;try{f=e(d)}finally{i=l,u=t}}(o=>{t=o,S(n,e())}),t}const I=function(e,n){const t=document.createElement("template");if(t.innerHTML=e,t.innerHTML!==e)throw new Error(`Template html does not match input:\n${t.innerHTML}\n${e}`);let o=t.content.firstChild;return n&&(o=o.firstChild),o}('<div class="box-view"><div class="box"></div></div>');function O(e){const n=++e.count;e.setTop(10*Math.sin(n/10)),e.setLeft(10*Math.cos(n/10)),e.setColor(n%255),e.setContent(n%100)}const P=()=>{const t=function(n){const t=[];for(let o=0;o<n;o++){const[n,o]=e(0),[l,s]=e(0),[r,i]=e(null),[u,c]=e(0);t.push({top:n,left:l,color:r,content:u,setTop:o,setLeft:s,setColor:i,setContent:c,count:0})}return t}(Benchmark.number);return Benchmark.Framework.SolidSignals.loop=()=>Promise.resolve().then(()=>(function(e){let n=void 0;if(null!==r)n=e();else{(r=s).changes.reset();try{n=e(),h()}finally{r=null}}return n})(()=>t.forEach(O))),t.map((e,t)=>(function(){const o=I.cloneNode(!0),l=o.firstChild;l.id=t,l.textContent=e.content();const s=l.firstChild;return n(()=>{Object.assign(l.style,{top:`${e.top()}px`,left:`${e.left()}px`,background:`rgb(0,0,${e.color()})`}),s.data=e.content()}),o})())};let R;Benchmark.Framework.SolidSignals={start(){R=j(P,document.getElementById("grid"))},cleanup(){R&&R()}}}();
