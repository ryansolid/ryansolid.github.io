!function(){"use strict";function e(e,t){v(e,t,!1,!1)}const t=(e,t)=>e===t;function n(e,n,o){null===m&&console.warn("computations created without a root or parent will never be disposed"),o||(o=t);const[l,i]=function(e,t){const n=new r(e);let o;if(t){let l=-1;o=o=>{if(!t(e,o)){const t=g.time;if(t===l)throw new Error(`Conflicting value update: ${o} is not the same as ${e}`);l=t,e=o,n.next(o)}}}else o=n.next.bind(n);return[n.current.bind(n),o]}(e(void 0),o);return v(t=>(i(t=e(t)),t),n,!1,!1),l}function o(e,t){var n,o=m,l=0===e.length?null:function(){null===i||(null!==p?g.disposes.add(i):j(i))},i=null===l?h:w();let r=t||m;i!==r&&(i.owner=r),m=i;try{n=null===l?e():e(l)}finally{m=o}return null!==l&&C(i,null,void 0,!0)&&(i=null),n}function l(e){var t,n=b;return b=null,t=e(),b=n,t}function i(e){null===m?console.warn("cleanups created without a root or parent will never be run"):null===m.cleanups?m.cleanups=[e]:m.cleanups.push(e)}class r{constructor(e){this.value=e,this.pending=c,this.log=null}current(){return null!==b&&function(e){null===e.log&&(e.log={node1:null,node1slot:0,nodes:null,nodeslots:null});!function(e){var t,n=b,o=null===n.source1?-1:null===n.sources?0:n.sources.length;null===e.node1?(e.node1=n,e.node1slot=o,t=-1):null===e.nodes?(e.nodes=[n],e.nodeslots=[o],t=0):(t=e.nodes.length,e.nodes.push(n),e.nodeslots.push(o));null===n.source1?(n.source1=e,n.source1slot=t):null===n.sources?(n.sources=[e],n.sourceslots=[t]):(n.sources.push(e),n.sourceslots.push(t))}(e.log)}(this),this.value}next(e){if(null!==p)if(this.pending!==c){if(e!==this.pending)throw new Error("conflicting changes: "+e+" !== "+this.pending)}else this.pending=e,g.changes.add(this);else null!==this.log?(this.pending=e,g.changes.add(this),S()):this.value=e;return e}}class s{constructor(){this.fn=null,this.age=-1,this.state=d,this.source1=null,this.source1slot=0,this.sources=null,this.sourceslots=null,this.owner=m,this.owned=null,this.cleanups=null}}class u{constructor(){this.items=[],this.count=0}reset(){this.count=0}add(e){this.items[this.count++]=e}run(e){for(var t=this.items,n=0;n<this.count;n++)e(t[n]),t[n]=null;this.count=0}}var c={},d=0,a=1,f=2,h=new s,g={time:0,changes:new u,updates:new u,disposes:new u},p=null,b=null,m=null,y=null;function v(e,t,n,o){var l=w(),i=m,r=b,s=null===p;m=l,b=o?null:l,t=s?function(e,t){p=g,g.changes.reset(),g.updates.reset();try{return e(t)}finally{m=b=p=null}}(e,t):e(t),m=i,b=r,C(l,e,t,n),s&&function(e,t){if(g.changes.count>0||g.updates.count>0){g.time++;try{x(g)}finally{p=null,m=e,b=t}}}(i,r)}function w(){var e=y;return null===e?e=new s:y=null,e}function C(e,t,n,o){var l,i=o||null===m||m===h?null:m,r=!e.noRecycle&&null===e.source1&&(null===e.owned&&null===e.cleanups||null!==i);if(r){if(y=e,e.owner=null,null!==i){if(null!==e.owned){if(null===i.owned)i.owned=e.owned;else for(l=0;l<e.owned.length;l++)i.owned.push(e.owned[l]);e.owned=null}if(null!==e.cleanups){if(null===i.cleanups)i.cleanups=e.cleanups;else for(l=0;l<e.cleanups.length;l++)i.cleanups.push(e.cleanups[l]);e.cleanups=null}}}else e.fn=t,e.value=n,e.age=g.time,null!==i&&(null===i.owned?i.owned=[e]:i.owned.push(e));return r}function S(){var e=m;g.updates.reset(),g.time++;try{x(g)}finally{p=b=null,m=e}}function x(e){var t=p,n=0;for(p=e,e.disposes.reset();0!==e.changes.count||0!==e.updates.count||0!==e.disposes.count;)if(n>0&&e.time++,e.changes.run(A),e.updates.run(k),e.disposes.run(j),n++>1e5)throw new Error("Runaway clock detected");p=t}function A(e){e.value=e.pending,e.pending=c,e.log&&function(e){var t=e.node1,n=e.nodes;null!==t&&_(t);if(null!==n)for(var o=0,l=n.length;o<l;o++)_(n[o])}(e.log)}function _(e){var t=g.time;e.age<t&&(e.age=t,e.state=a,g.updates.add(e),null!==e.owned&&function e(t){for(var n=0;n<t.length;n++){var o=t[n];o.age=g.time,o.state=d,null!==o.owned&&e(o.owned)}}(e.owned))}function k(e){if(e.state===a){var t=m,n=b;m=b=e,e.state=f,N(e,!1),e.value=e.fn(e.value),e.state=d,m=t,b=n}}function N(e,t){var n,o,l=e.source1,i=e.sources,r=e.sourceslots,s=e.cleanups,u=e.owned;if(null!==s){for(n=0;n<s.length;n++)s[n](t);e.cleanups=null}if(null!==u){for(n=0;n<u.length;n++)j(u[n]);e.owned=null}if(null!==l&&(T(l,e.source1slot),e.source1=null),null!==i)for(n=0,o=i.length;n<o;n++)T(i.pop(),r.pop())}function T(e,t){var n,o,l=e.nodes,i=e.nodeslots;-1===t?e.node1=null:(n=l.pop(),o=i.pop(),t!==l.length&&(l[t]=n,i[t]=o,-1===o?n.source1slot=t:n.sourceslots[o]=t))}function j(e){e.fn=null,e.owner=null,N(e,!0)}const O=Symbol("solid-node"),E=Symbol("solid-proxy");function M(e){return e[E]||(e[E]=new Proxy(e,P))}function B(e){return null!==e&&"object"==typeof e&&(e.__proto__===Object.prototype||Array.isArray(e))}function I(e){let t,n,o;if(t=null!=e&&e._state)return t;if(!B(e))return e;if(Array.isArray(e)){Object.isFrozen(e)&&(e=e.slice(0));for(let t=0,l=e.length;t<l;t++)(n=I(o=e[t]))!==o&&(e[t]=n)}else{Object.isFrozen(e)&&(e=Object.assign({},e));let t=Object.keys(e);for(let l=0,i=t.length;l<i;l++)(n=I(o=e[t[l]]))!==o&&(e[t[l]]=n)}return e}function L(e){let t=e[O];return t||(e[O]=t={}),t}const P={get(e,t){if("_state"===t)return e;if(t===E||t===O)return;const n=e[t],o=B(n);if(null!==b&&"function"!=typeof n){let l,i;o&&(l=L(n))&&(i=l._self||(l._self=new r(void 0))).current(),(i=(l=L(e))[t]||(l[t]=new r(void 0))).current()}return o?M(n):n},set:()=>!0,deleteProperty:()=>!0};function R(e,t,n){if(n=I(n),e[t]===n)return;const o=Array.isArray(e)||!(t in e);void 0===n?delete e[t]:e[t]=n;let l,i=L(e);(l=i[t])&&l.next(),o&&(l=i._self)&&l.next()}function F(e,t){const n=Object.keys(t);for(let o=0;o<n.length;o+=1){const l=n[o];R(e,l,t[l])}}function $(e,t,n=[]){if(1===t.length){let o=t[0];if("function"==typeof o&&void 0===(o=o(M(e),n)))return;return void F(e,o)}const o=t.shift(),l=typeof o,i=Array.isArray(e);if(Array.isArray(o))for(let l=0;l<o.length;l++)$(e,[o[l]].concat(t),n.concat([o[l]]));else if(i&&"function"===l)for(let l=0;l<e.length;l++)o(e[l],l)&&$(e,[l].concat(t),n.concat([l]));else if(i&&"object"===l){const{from:l=0,to:i=e.length-1,by:r=1}=o;for(let o=l;o<=i;o+=r)$(e,[o].concat(t),n.concat([o]))}else if(1===t.length){let l=t[0];if("function"==typeof l){const t=e[o];l=l(B(t)?M(t):t,n.concat([o]))}B(e[o])&&B(l)&&!Array.isArray(l)?F(e[o],l):R(e,o,l)}else $(e[o],t,n.concat([o]))}function z(e){return[M(e=I(e||{})),function(){const t=arguments;!function(e){if(null!==p)e();else{(p=g).changes.reset();try{e(),S()}finally{p=null}}}(()=>{if(Array.isArray(t[0]))for(let n=0;n<t.length;n+=1)$(e,t[n]);else $(e,Array.prototype.slice.call(t))})}]}function J(t,n){var o;let l,i;return"string"==typeof n&&(o=n,n=(e,t)=>e.classList.toggle(o,t)),e(e=>{const o=t();e&&n(e,!1);let r=l;for(;r&&r!==i;){if(r.model===o)return n(r,!0),r;r=r.nextSibling}}),(e,t)=>(l=e,i=t)}const V="__rGroup",D="nextSibling",G="previousSibling";let H=0;function W(e){const t=document.createElement("template");return t.innerHTML=e,t}function q(t,n,o,l,i){if(Array.isArray(n)){if(!n.length)return;let e=(n=function e(t,n){for(let o=0,l=n.length;o<l;o++){let l=n[o];l instanceof Node?11===l.nodeType?e(t,l.childNodes):t.push(l):null==l||!0===l||!1===l||(Array.isArray(l)?e(t,l):"string"==typeof l?t.push(document.createTextNode(l)):t.push(document.createTextNode(l.toString())))}return t}([],n))[0];1!==n.length&&(e[V]=n[n.length-1][V]=l);for(let e=0;e<n.length;e++)o?t.insertBefore(n[e],o):t.appendChild(n[e]);return e}let r,s=typeof n;if(null==n||"string"===s||"number"===s)n=document.createTextNode(n||"");else{if("function"===s)return e(()=>{const e=n();if(e){let n=o;r&&(n=r.nextSibling,t.removeChild(r)),r=q(t,e,n,l,i)}}),r||(r=document.createTextNode(""),o?t.insertBefore(r,o):t.appendChild(r)),r;11===n.nodeType&&(r=n.firstChild)&&r!==n.lastChild&&(r[V]=n.lastChild[V]=l)}return o?t.insertBefore(n,o):t.appendChild(n),i&&i(r||n),r||n}function K(e,t,n){const o=e[V];if(o)for(e=e[t];e&&e[V]!==o;)e=e[t];return n?e:e[t]}function Q(e,t,n){let o;for(;t!==n;)o=t.nextSibling,e.removeChild(t),t=o}function U(e,t,n,o){return void 0===n?e.textContent="":(Array.isArray(t)?o=t[0]:null!=t&&""!=t&&null==o&&(o=K(n&&n.previousSibling||e.lastChild,G,!0)),o&&Q(e,o,n),"")}function X(e,t,n,o,l){if(t===n)return n;e=o&&o.parentNode||l&&l.parentNode||e;const i=typeof t;if("string"===i||"number"===i)if("number"===i&&(t=t.toString()),void 0!==o){const i=o&&o.previousSibling||l&&l.nextSibling||e.lastChild;if(""===t)U(e,n,o);else if(""!==n&&"string"==typeof n)i.data=t;else{const l=document.createTextNode(t);""!==n&&null!=n?e.replaceChild(l,i):e.insertBefore(l,o)}n=t}else n=""!==n&&"string"==typeof n?e.firstChild.data=t:e.textContent=t;else if(null==t||"boolean"===i)n=U(e,n,o);else{if(!(t instanceof Node||Array.isArray(t)))throw new Error("content must be Node, stringable, or array of same");""!==n&&null!=n&&U(e,n,o),q(e,t,o,++H),n=t}return n}function Y(t,n,o,l){if("function"!=typeof n)return X(t,n,l,o);let i;void 0!==o&&(i=o?o.previousSibling:t.lastChild),e((e=l)=>X(t,n(),e,o,i))}const Z=new Set;function ee(e){return e&&(e.model||ee(e.host||e.parentNode))}function te(e){const t=`__${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>n});null!==n;){const o=n[t];if(o){if(o(e,o.length>1?ee(n):void 0),e.cancelBubble)return}n=n.host&&n.host instanceof Node?n.host:n.parentNode}}function ne(e,t){const n=Object.keys(t);for(let o=0;o<n.length;o++){const l=n[o],i=l.split(/\s+/);for(let n=0;n<i.length;n++)e.classList.toggle(i[n],t[l])}}function oe(t,o,i,r,s){let u,c;const{afterRender:d,fallback:a}=r,f=n(o);void 0!==s&&(u=s?s.previousSibling:t.lastChild),e(()=>{const e=f();l(()=>{U(t=s&&s.parentNode||u&&u.parentNode||t,c,s,u&&u.nextSibling),c=null,null==e||!1===e?(d&&d(c,s),a&&q(t,a(),s,++H,e=>c=e)):q(t,i(e),s,++H,e=>(c=e,d&&d(e,s)))})})}function le(e,t,n,o){let l;for(;t!==n;)l=t.nextSibling,e.insertBefore(t,o),t=l}function ie(e,t){let n;(n=e.get(t))&&n(),e.delete(t)}function re(e,t){let n=-1,o=e.length;if(o>0&&e[o-1]<=t)return o-1;for(;o-n>1;){let l=Math.floor((n+o)/2);e[l]>t?o=l:n=l}return n}function se(t,n,r,s,u){let c=new Map,d=!1,a=u?u.previousSibling:null;const{afterRender:f,fallback:h}=s;function g(e,n,l){return o(o=>q(t,r(e,n),l,++H,e=>c.set(e,o)))}function p(){f&&f(a?a.nextSibling:t.firstChild,u)}function b(){for(let e of c.keys())c.get(e)();c.clear()}i(b),e((e=[])=>{const i=n()||[];return l(()=>{t=u&&u.parentNode||a&&a.parentNode||t;const n=i.length;if(0===n||d){if(void 0!==u){let e=a?a.nextSibling:t.firstChild;Q(t,e,u||null)}else t.textContent="";if(b(),0===n)return p(),h&&(d=!0,o(e=>q(t,h(),u,++H,t=>c.set(t,e)))),[];d=!1}if(0===e.length){for(let e=0;e<n;e++)g(i[e],e,u);return p(),i.slice(0)}let l,r,s=0,f=0,m=!0,y=e.length-1,v=n-1,w=a?a.nextSibling:t.firstChild,C=w,S=u?u.previousSibling:t.lastChild,x=u;e:for(;m;){let n;for(m=!1,l=e[s],r=i[f];l===r;){if(s++,f++,C=w=K(w,D),y<s||v<f)break e;l=e[s],r=i[f]}for(l=e[y],r=i[v];l===r;){if(y--,v--,S=(x=K(S,G,!0)).previousSibling,y<s||v<f)break e;l=e[y],r=i[v]}for(l=e[y],r=i[f];l===r;){m=!0;let o=K(S,G,!0);if(n=o.previousSibling,C!==o&&(le(t,o,S.nextSibling,C),S=n),f++,--y<s||v<f)break e;l=e[y],r=i[f]}for(l=e[s],r=i[v];l===r;){if(m=!0,n=K(w,D),w!==x){let e=n.previousSibling;le(t,w,n,x),x=e,w=n}if(v--,y<++s||v<f)break e;l=e[s],r=i[v]}}if(v<f){if(s<=y){let e,n;for(;s<=y;)e=(n=K(S,G,!0)).previousSibling,Q(t,n,S.nextSibling),ie(c,n),S=e,y--}return p(),i.slice(0)}if(y<s){if(f<=v)for(;f<=v;)g(i[f],f,x),f++;return p(),i.slice(0)}const A=new Array(v+1-f);for(let e=f;e<=v;e++)A[e]=-1;const _=new Map;for(let e=f;e<=v;e++)_.set(i[e],e);let k=0,N=[];for(let t=s;t<=y;t++)_.has(e[t])?(A[_.get(e[t])]=t,k++):N.push(t);if(0===k){const e=w!==t.firstChild||S!==t.lastChild;let n,o=w;for(x=S.nextSibling;o!==x;)n=K(o,D),ie(c,o),e&&Q(t,o,n),o=n,s++;!e&&(t.textContent="");for(let e=f;e<=v;e++)g(i[e],e,x);return p(),i.slice(0)}const T=function(e,t){let n=[],o=[],l=-1,i=new Array(e.length);for(let r=t,s=e.length;r<s;r++){let t=e[r];if(t<0)continue;let s=re(n,t);-1!==s&&(i[r]=o[s]),s===l?(n[++l]=t,o[l]=r):t<n[s+1]&&(n[s+1]=t,o[s+1]=r)}for(let e=o[l];l>=0;e=i[e],l--)n[l]=e;return n}(A,f),j=[];let O,E=w,M=T.length-1;for(let e=s;e<=y;e++)j[e]=E,E=K(E,D);for(let e=0;e<N.length;e++){let n=j[N[e]];Q(t,n,K(n,D)),ie(c,n)}for(let e=v;e>=f;e--)T[M]===e?(x=j[A[T[M]]],M--):(-1===A[e]?O=g(i[e],e,x):(O=j[A[e]],le(t,O,K(O,D),x)),x=O);return p(),i.slice(0)})})}const ue="todos-solid";function ce(){const[t,n]=function(t){const n=localStorage.getItem(ue),[o,l]=z(n?JSON.parse(n):t);return e(()=>localStorage.setItem(ue,JSON.stringify(o))),[o,l]}({counter:1,todos:[],showMode:"all"});return e(()=>{const e=t.todos.filter(e=>e.completed).length;n({completedCount:e,remainingCount:t.todos.length-e})}),[t,{addTodo:({title:e})=>n(["todos",n=>[{title:e,id:t.counter,completed:!1},...n]],["counter",e=>e+1]),removeTodo:e=>n("todos",t=>t.filter(t=>t.id!==e)),editTodo:e=>n("todos",t.todos.findIndex(t=>t.id===e.id),e),clearCompleted:()=>n("todos",e=>e.filter(e=>!e.completed)),toggleAll:e=>n("todos",t=>t.completed!==e,{completed:e}),setVisibility:e=>n("showMode",e)}]}const de=W("<section class='todoapp'></section>"),ae=W("<header class='header'><h1>todos</h1><input class='new-todo' placeholder='What needs to be done?'/></header>"),fe=W("<section class='main'><input id='toggle-all' class='toggle-all' type='checkbox'/><label for='toggle-all'></label><ul class='todo-list'></ul></section>"),he=W("<li class='todo'><div class='view'><input class='toggle' type='checkbox'/><label></label><button class='destroy'></button></div></li>"),ge=W("<input class='edit'/>"),pe=W("<footer class='footer'><span class='todo-count'><strong></strong> left</span><ul class='filters'><li><a href='#/'>All</a></li><li><a href='#/active'>Active</a></li><li><a href='#/completed'>Completed</a></li></ul></footer>"),be=W("<button class='clear-completed'>Clear completed</button>"),me=({addTodo:e})=>(function(){const t=ae.content.firstChild.cloneNode(!0);return t.firstChild.nextSibling.__keyup=({target:t,keyCode:n})=>{let o;13===n&&(o=t.value.trim())&&(e({title:o}),t.value="")},t})(),ye=({store:t,editTodo:n,removeTodo:o,toggleAll:l})=>{const[i,r]=z(),s=e=>i.editingTodoId===e,u=e=>r("editingTodoId",e),c=({target:{value:e}},t)=>{let o;i.editingTodoId===t&&(o=e.trim())&&(n({id:t,title:o}),u())},d=({target:{checked:e}},t)=>n({id:t,completed:e}),a=(e,t)=>u(t),f=(e,t)=>o(t),h=(e,t)=>{13===e.keyCode?c(e,t):27===e.keyCode&&u()};return function(){const n=fe.content.firstChild.cloneNode(!0),o=n.firstChild,r=o.nextSibling.nextSibling;return o.__input=({target:{checked:e}})=>l(e),e(()=>o.checked=!t.remainingCount),se(r,()=>(e=>"active"===t.showMode?e.filter(e=>!e.completed):"completed"===t.showMode?e.filter(e=>e.completed):e)(t.todos),e=>ve(Object.assign({todo:e,isEditing:s,toggle:d,edit:a,remove:f,doneEditing:h,save:c},{})),{afterRender:J(()=>i.editingTodoId,"editing")}),n}()},ve=({todo:t,isEditing:n,toggle:o,edit:l,remove:i,save:r,doneEditing:s})=>(function(){const u=he.content.firstChild.cloneNode(!0),c=u.firstChild.firstChild,d=c.nextSibling,a=d.nextSibling;return u.model=t.id,e(()=>ne(u,{completed:t.completed})),c.__input=o,e(()=>c.checked=t.completed),d.__dblclick=l,Y(d,()=>t.title),a.__click=i,oe(u,()=>n(t.id),()=>(function(){const e=ge.content.firstChild.cloneNode(!0);return e.__keyup=s,e.__focusout=r,e.value=t.title,e})(),{afterRender:e=>e&&e.focus()},null),u})(),we=({store:t,clearCompleted:n})=>(function(){const o=pe.content.firstChild.cloneNode(!0),l=o.firstChild,i=l.firstChild,r=i.nextSibling,s=l.nextSibling.firstChild,u=s.firstChild,c=s.nextSibling,d=c.firstChild,a=c.nextSibling.firstChild;return Y(i,()=>t.remainingCount),Y(l,()=>1===t.remainingCount?" item":" items",r),e(()=>ne(u,{selected:"all"===t.showMode})),e(()=>ne(d,{selected:"active"===t.showMode})),e(()=>ne(a,{selected:"completed"===t.showMode})),oe(o,()=>t.completedCount>0,()=>(function(){const e=be.content.firstChild.cloneNode(!0);return e.__click=n,e})(),{},null),o})();o(()=>document.body.insertBefore((()=>{const[e,{addTodo:t,toggleAll:n,editTodo:o,removeTodo:l,clearCompleted:r,setVisibility:s}]=ce(),u=()=>s(location.hash.slice(2)||"all");return window.addEventListener("hashchange",u),i(()=>window.removeEventListener("hashchange",u)),function(){const i=de.content.firstChild.cloneNode(!0);return Y(i,me({addTodo:t}),null),oe(i,()=>e.todos.length>0,()=>(function(){const t=document.createDocumentFragment();return Y(t,ye(Object.assign({store:e,toggleAll:n,editTodo:o,removeTodo:l},{})),null),Y(t,we({store:e,clearCompleted:r}),null),t})(),{},null),i}()})(),document.body.firstChild)),function(e){for(let t=0,n=e.length;t<n;t++){const n=e[t];Z.has(n)||(Z.add(n),document.addEventListener(n,te))}}(["keyup","input","dblclick","click","focusout"])}();
