!function(){"use strict";var e=function(e,n){var t=new r(e,n);return function(){return t.current()}};Object.defineProperty(e,"default",{value:e}),e.root=function(e){var n=d,t=0===e.length?g:new r(null,null),o=void 0,l=0===e.length?null:function(){null!==p?f.disposes.add(t):k(t)};return d=t,null===p?o=function(e,n,t){try{return null===n?e():e(n)}finally{d=t}}(e,l,n):(o=null===l?e():e(l),d=n),o},e.on=function(n,t,o,r){var l;return Array.isArray(n)&&(l=n,n=function(){for(var e=0;e<l.length;e++)l[e]()}),r=!!r,e(i,o);function i(e){var o=h;return n(),r?r=!1:(h=null,e=t(e),h=o),e}},e.effect=function(e,n){new r(e,n)},e.data=function(e){var n=new o(e);return function(e){return 0===arguments.length?n.current():n.next(e)}},e.value=function(n,t){var o=e.data(n),r=-1;return function(e){if(0===arguments.length)return o();if(!(t?t(n,e):n===e)){var l=f.time;if(r===l)throw new Error("conflicting values: "+e+" is not the same as "+n);r=l,n=e,o(e)}return e}},e.freeze=function(e){var n=void 0;if(null!==p)n=e();else{(p=f).changes.reset();try{n=e(),v()}finally{p=null}}return n},e.sample=function(e){var n,t=h;return null!==t?(h=null,n=e(),h=t):n=e(),n},e.cleanup=function(e){null!==d?null===d.cleanups?d.cleanups=[e]:d.cleanups.push(e):console.warn("cleanups created without a root or parent will never be run")},e.makeDataNode=function(e){return new o(e)},e.makeComputationNode=function(e,n){return new r(e,n)},e.isFrozen=function(){return null!==p},e.isListening=function(){return null!==h};var n=function(){return function(){this.time=0,this.changes=new i,this.updates=new i,this.disposes=new i}}(),t={time:function(){return f.time}},o=function(){function e(e){this.value=e,this.pending=s,this.log=null}return e.prototype.current=function(){return null!==h&&function(e,n){null===e.log&&(e.log=new l);y(e.log,n)}(this,h),this.value},e.prototype.next=function(e){if(null!==p)if(this.pending!==s){if(e!==this.pending)throw new Error("conflicting changes: "+e+" !== "+this.pending)}else this.pending=e,f.changes.add(this);else null!==this.log?(this.pending=e,f.changes.add(this),v()):this.value=e;return e},e.prototype.clock=function(){return t},e}(),r=function(){function e(e,n){if(this.state=u,this.source1=null,this.source1slot=0,this.sources=null,this.sourceslots=null,this.log=null,this.owned=null,this.cleanups=null,this.fn=e,this.value=n,this.age=f.time,null!==e){var t=d,o=h;null===t&&console.warn("computations created without a root or parent will never be disposed"),d=h=this,null===p?function(e){p=f,f.changes.reset(),f.updates.reset();try{e.value=e.fn(e.value),(f.changes.count>0||f.updates.count>0)&&(f.time++,b(f))}finally{p=d=h=null}}(this):this.value=this.fn(this.value),t&&t!==g&&(null===t.owned?t.owned=[this]:t.owned.push(this)),d=t,h=o}}return e.prototype.current=function(){if(null!==h){if(this.age===f.time){if(this.state===a)throw new Error("circular dependency");x(this)}!function(e,n){null===e.log&&(e.log=new l);y(e.log,n)}(this,h)}return this.value},e.prototype.clock=function(){return t},e}(),l=function(){return function(){this.node1=null,this.node1slot=0,this.nodes=null,this.nodeslots=null}}(),i=function(){function e(){this.items=[],this.count=0}return e.prototype.reset=function(){this.count=0},e.prototype.add=function(e){this.items[this.count++]=e},e.prototype.run=function(e){for(var n=this.items,t=0;t<this.count;t++)e(n[t]),n[t]=null;this.count=0},e}(),s={},u=0,c=1,a=2,f=new n,p=null,h=null,d=null,g=new r(null,null);function y(e,n){var t,o=null===n.source1?-1:null===n.sources?0:n.sources.length;null===e.node1?(e.node1=n,e.node1slot=o,t=-1):null===e.nodes?(e.nodes=[n],e.nodeslots=[o],t=0):(t=e.nodes.length,e.nodes.push(n),e.nodeslots.push(o)),null===n.source1?(n.source1=e,n.source1slot=t):null===n.sources?(n.sources=[e],n.sourceslots=[t]):(n.sources.push(e),n.sourceslots.push(t))}function v(){var e=d;f.updates.reset(),f.time++;try{b(f)}finally{p=h=null,d=e}}function b(e){var n=p,t=0;for(p=e,e.disposes.reset();0!==e.changes.count||0!==e.updates.count||0!==e.disposes.count;)if(t>0&&e.time++,e.changes.run(m),e.updates.run(x),e.disposes.run(k),t++>1e5)throw new Error("Runaway clock detected");p=n}function m(e){e.value=e.pending,e.pending=s,e.log&&w(e.log)}function w(e){var n=e.node1,t=e.nodes;if(null!==n&&S(n),null!==t)for(var o=0,r=t.length;o<r;o++)S(t[o])}function S(e){var n=f.time;e.age<n&&(e.age=n,e.state=c,f.updates.add(e),null!==e.owned&&function e(n){for(var t=0;t<n.length;t++){var o=n[t];o.age=f.time,o.state=u,null!==o.owned&&e(o.owned)}}(e.owned),null!==e.log&&w(e.log))}function x(e){if(e.state===c){var n=d,t=h;d=h=e,e.state=a,C(e,!1),e.value=e.fn(e.value),e.state=u,d=n,h=t}}function C(e,n){var t,o,r=e.source1,l=e.sources,i=e.sourceslots,s=e.cleanups,u=e.owned;if(null!==s){for(t=0;t<s.length;t++)s[t](n);e.cleanups=null}if(null!==u){for(t=0;t<u.length;t++)k(u[t]);e.owned=null}if(null!==r&&(A(r,e.source1slot),e.source1=null),null!==l)for(t=0,o=l.length;t<o;t++)A(l.pop(),i.pop())}function A(e,n){var t,o,r=e.nodes,l=e.nodeslots;-1===n?e.node1=null:(t=r.pop(),o=l.pop(),n!==r.length&&(r[n]=t,l[n]=o,-1===o?t.source1slot=n:t.sourceslots[o]=n))}function k(e){e.fn=null,e.log=null,C(e,!0)}const N=Symbol("solid-node"),j=Symbol("solid-proxy"),E={get(n,t){if("_state"===t)return n;const o=n[t],r=F(o);if(e.isListening()&&"function"!=typeof o){let l,i;r&&(l=z(o))&&(i=l._self||(l._self=e.makeDataNode())).current(),(i=(l=z(n))[t]||(l[t]=e.makeDataNode())).current()}return r?B(o):o},set:()=>!0,deleteProperty:()=>!0};function B(e){return e[j]||(e[j]=new Proxy(e,E))}function F(e){return null!==e&&"object"==typeof e&&!(e instanceof Element)}function O(e){let n,t,o;if(n=null!=e&&e._state)return n;if(!F(e))return e;if(Array.isArray(e)){Object.isFrozen(e)&&(e=e.slice(0));for(let n=0,r=e.length;n<r;n++)(t=O(o=e[n]))!==o&&(e[n]=t)}else{Object.isFrozen(e)&&(e=Object.assign({},e));let n=Object.keys(e);for(let r=0,l=n.length;r<l;r++)(t=O(o=e[n[r]]))!==o&&(e[n[r]]=t)}return e}function z(e){let n=e[N];return n||(e[N]=n={}),n}function L(e,n,t,o){if(t=O(t),!o&&e[n]===t)return;const r=Array.isArray(e)||!(n in e);void 0===t?delete e[n]:e[n]=t;let l,i=z(e);(l=i[n])&&l.next(),r&&(l=i._self)&&l.next()}function M(e,n){const t=Object.keys(n)||[];for(let o=0;o<t.length;o+=1){const r=t[o];L(e,r,n[r])}}function T(e,n,t=[]){if(1===n.length){let o=n[0];if("function"==typeof o&&void 0===(o=o(B(e),t)))return;return M(e,o)}const o=n.shift(),r=typeof o,l=Array.isArray(e);if(Array.isArray(o))for(let r=0;r<o.length;r++)T(e,[o[r]].concat(n),t.concat([o[r]]));else if(l&&"function"===r)for(let r=0;r<e.length;r++)o(e[r],r)&&T(e[r],n.slice(0),t.concat([r]));else if(l&&"object"===r){const{from:r=0,to:l=e.length-1,by:i=1}=o;for(let o=r;o<=l;o+=i)T(e[o],n.slice(0),t.concat([o]))}else if(l&&"*"===o)for(let o=0;o<e.length;o++)T(e,[o].concat(n),t.concat([o]));else{if(1===n.length){let r=n[0];if("function"==typeof r){const n=e[o];r=r(F(n)?B(n):n,t.concat([o]))}return F(e[o])&&F(r)&&!Array.isArray(r)?M(e[o],r):L(e,o,r)}T(e[o],n,t.concat([o]))}}const{root:_,cleanup:P,sample:D,freeze:$}=e,H="__recGroup",G="nextSibling",I="previousSibling";function R(e,n){const t=e[H];for(;e[n]&&e[n][H]===t;)e=e[n];return e[n]}function q(e,n,t){let o;for(;n!==t;)o=n.nextSibling,e.removeChild(n),n=o}function J(e,n,t,o){let r;for(;n!==t;)r=n.nextSibling,e.insertBefore(n,o),n=r}function K(e,n){const t=n[H];e.get(t)(),e.delete(t)}function Q(e,n,t,o,r,l,i){const{wrap:s,cleanup:u,root:c,sample:a}=r;let f=new Map,p=0;function h(n,o,r){return c(l=>{f.set(++p,l);const i=function(e,n){if(11===e.nodeType){let t=e.firstChild;for(;t;)t[H]=n,t=t.nextSibling}else e[H]=n;return e}(t(n,o),p);return r?e.insertBefore(i,r):e.appendChild(i),i})}function d(){o&&o(l?l.nextSibling:e.firstChild,i)}u(function(){for(let e of f.keys())f.get(e)();f.clear()}),s((t=[])=>{const o=n();return a(()=>{e=l&&l.parentNode||e;const n=o.length;if(0===n){if(void 0!==l||void 0!==i){let n=void 0!==l?l.nextSibling:e.firstChild;q(e,n,void 0===i?null:i)}else e.textContent="";for(let e of f.keys())f.get(e)();return f.clear(),d(),[]}if(0===t.length){let e=new Array(n);for(let t=0;t<n;t++)h(e[t]=o[t],t,i);return d(),e}let r,s,u=0,c=0,a=!0,p=t.length-1,g=n-1,y=l?l.nextSibling:e.firstChild,v=y,b=i?i.previousSibling:e.lastChild,m=i;e:for(;a;){let n;for(a=!1,r=t[u],s=o[c];r===s;){if(u++,c++,v=y=R(y,G),p<u||g<c)break e;r=t[u],s=o[c]}for(r=t[p],s=o[g];r===s;){if(p--,g--,m=b,b=R(b,I),p<u||g<c)break e;r=t[p],s=o[g]}for(r=t[p],s=o[c];r===s;){a=!0;let l=(n=R(b,I)).nextSibling;if(v!==l&&(J(e,l,b.nextSibling,v),b=n),c++,--p<u||g<c)break e;r=t[p],s=o[c]}for(r=t[u],s=o[g];r===s;){if(a=!0,n=R(y,G),y!==m){let t=n.previousSibling;J(e,y,n,m),m=t,y=n}if(g--,p<++u||g<c)break e;r=t[u],s=o[g]}}if(g<c){if(u<=p){let n,t,o;for(;u<=p;){for(t=(o=b)[H];o.previousSibling&&o.previousSibling[H]===t;)o=o.previousSibling;n=o.previousSibling,q(e,o,b.nextSibling),K(f,b),b=n,p--}}return d(),o.slice(0)}if(p<u){if(c<=g)for(;c<=g;)h(o[c],c,m),c++;return d(),o.slice(0)}const w=new Array(g+1-c);for(let e=c;e<=g;e++)w[e]=-1;const S=new Map;for(let e=c;e<=g;e++)S.set(o[e],e);let x=0,C=[];for(let e=u;e<=p;e++)S.has(t[e])?(w[S.get(t[e])]=e,x++):C.push(e);if(0===x){const n=y!==e.firstChild||b!==e.lastChild;let t,r=y;for(m=b.nextSibling;r!==m;)t=R(r,G),K(f,r),n&&q(e,r,t),r=t,u++;!n&&(e.textContent="");for(let e=c;e<=g;e++)h(o[e],e,m);return d(),o.slice(0)}const A=function(e,n){for(var t=[],o=[],r=-1,l=new Array(e.length),i=n,s=e.length;i<s;i++){var u=e[i];if(!(u<0)){var c=U(t,u);-1!==c&&(l[i]=o[c]),c===r?(t[++r]=u,o[r]=i):u<t[c+1]&&(t[c+1]=u,o[c+1]=i)}}for(i=o[r];r>=0;i=l[i],r--)t[r]=i;return t}(w,c),k=[];let N,j=y,E=A.length-1;for(let e=u;e<=p;e++)k[e]=j,j=R(j,G);for(let n=0;n<C.length;n++){let t=k[C[n]];q(e,t,R(t,G)),K(f,t)}for(let n=g;n>=c;n--)A[E]===n?(m=k[w[A[E]]],E--):(-1===w[n]?N=h(o[n],n,m):(N=k[w[n]],J(e,N,R(N,G),m)),m=N);return d(),o.slice(0)})})}function U(e,n){var t=-1,o=e.length;if(o>0&&e[o-1]<=n)return o-1;for(;o-t>1;){var r=Math.floor((t+o)/2);e[r]>n?o=r:t=r}return t}const V="property";var W={href:{type:"attribute"},style:{type:V,alias:"style.cssText"},for:{type:V,alias:"htmlFor"},class:{type:V,alias:"className"},spellCheck:{type:V,alias:"spellcheck"},allowFullScreen:{type:V,alias:"allowFullscreen"},autoCapitalize:{type:V,alias:"autocapitalize"},autoFocus:{type:V,alias:"autofocus"},autoPlay:{type:V,alias:"autoplay"}};function X(e,n,t,o){if(!t)return e.textContent="";if(Array.isArray(n))for(let t=0;t<n.length;t++)e.removeChild(n[t]);else if(null!=n&&""!=n)if(void 0!==o){let n,r=t.previousSibling;for(;r!==o;)n=r.previousSibling,e.removeChild(r),r=n}else e.removeChild(t.previousSibling);return""}const Y=function(e){const{wrap:n,cleanup:t,root:o}=e;function r(e,t,o,l){if(t===o)return o;e=l&&l.parentNode||e;const i=typeof t;if("string"===i||"number"===i)if("number"===i&&(t=t.toString()),l)if(""!==o&&"string"==typeof o)o=l.previousSibling.data=t;else{const n=document.createTextNode(t);""!==o&&null!=o?e.replaceChild(n,l.previousSibling):e.insertBefore(n,l),o=t}else o=""!==o&&"string"==typeof o?e.firstChild.data=t:e.textContent=t;else if(null==t||""===t||"boolean"===i)o=X(e,o,l);else if("function"===i)n(function(){o=r(e,t(),o,l)});else if(t instanceof Node)Array.isArray(o)?0===o.length?e.insertBefore(t,l):1===o.length?e.replaceChild(t,o[0]):(X(e,o,l),e.appendChild(t)):null==o||""===o?e.insertBefore(t,l):e.replaceChild(t,l&&l.previousSibling||e.firstChild),o=t;else{if(!Array.isArray(t))throw new Error("content must be Node, stringable, or array of same");{let n=function e(n,t){for(var o=0,r=t.length;o<r;o++){var l=t[o];l instanceof Node?11===l.nodeType?e(n,l.childNodes):n.push(l):null==l||!0===l||!1===l||(Array.isArray(l)?e(n,l):"string"==typeof l?n.push(l):n.push(l.toString()))}return n}([],t);if(X(e,o,l),0!==n.length)for(let t=0,o=n.length;t<o;t++){let o=n[t];o instanceof Node||(o=n[t]=document.createTextNode(o)),e.insertBefore(o,l)}o=n}}return o}return Object.assign({insert(e,t,o,l){if("function"!=typeof t)return r(e,t,o,l);n((n=o)=>r(e,t(),n,l))},addEventListener(e,n,t){e.addEventListener(n,e=>{if(t.length<2)return t(e);const n=function e(n){let t,o=n.model,r=n.action;return!o&&n.parentNode&&(t=e(n.parentNode)),[o||t&&t[0],r||t&&t[1]]}(e.target);t(e,n[0],n[1])})},spread(e,t){n(function(){const n=t();let o;for(const t in n){const r=n[t];if("style"===t)Object.assign(e.style,r);else if("classList"===t)for(const n in r)e.classList.toggle(n,r[n]);else(o=W[t])?"attribute"===o.type?e.setAttribute(t,r):e[o.alias]=r:e[t]=r}})},flow(l,i,s,u,c,a){let f;if(a&&(f=a.previousSibling),"each"===i)Q(l,s,u,c,e,f,a);else if("when"===i){let e,i;t(function(){i&&i()}),n(n=>{const t=s();return t===n?n:(i&&i(),l=a&&a.parentNode||l,null==t||!1===t?(X(l,e,a,f),e=null,t):(o(n=>{i=n,e=r(l,u(t),e,a),c&&c(e,a)}),t))})}}},e)}({wrap:e.makeComputationNode,root:e.root,cleanup:e.cleanup,sample:e.sample}),Z=document.createElement("template");Z.innerHTML="<div class='box-view'><div class='box'></div></div>";const ee=document.createElement("template");function ne(e){const n=[];for(let t=0;t<e;t++)n.push({top:0,left:0,color:null,content:0,count:0});return n}function te(e){const n=e.count+1;return{top:10*Math.sin(n/10),left:10*Math.cos(n/10),color:n%255,content:n%100,count:n}}ee.innerHTML="";const oe=()=>{const[n,t]=function(n){return[B(n=O(n)),function(){const t=arguments;e.freeze(()=>{if(Array.isArray(t[0]))for(let e=0;e<t.length;e+=1)T(n,t[e]);else T(n,Array.prototype.slice.call(t))})}]}({boxes:ne(Benchmark.number)});return Benchmark.Framework.Solid.loop=(()=>t("boxes","*",te)),function(){const e=ee.content.cloneNode(!0);return Y.insert(e,n.boxes.map((e,n)=>(function(){const t=Z.content.firstChild.cloneNode(!0),o=t.firstChild;return o.id=n,Y.wrap(()=>Object.assign(o.style,{top:`${e.top}px`,left:`${e.left}px`,background:`rgb(0,0,${e.color})`})),Y.insert(o,()=>e.content),t})())),e}()};let re;Benchmark.Framework.Solid={start(){_(e=>{re=e,document.getElementById("grid").appendChild(oe())})},cleanup(){re&&re()}}}();
