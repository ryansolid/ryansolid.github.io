!function(){"use strict";function n(n,e){!function(n,e,t,l){var o=p(),r=d,s=f,u=null===a;d=o,f=l?null:o,e=u?function(n,e){a=c,c.changes.reset(),c.updates.reset();try{return n(e)}finally{d=f=a=null}}(n,e):n(e);d=r,f=s,g(o,n,e,t),u&&function(n,e){if(c.changes.count>0||c.updates.count>0){c.time++;try{v(c)}finally{a=null,d=n,f=e}}}(r,s)}(n,e,!1,!1)}class e{constructor(n){this.value=n,this.pending=o,this.log=null}current(){return null!==f&&function(n){null===n.log&&(n.log={node1:null,node1slot:0,nodes:null,nodeslots:null});!function(n){var e,t=f,l=null===t.source1?-1:null===t.sources?0:t.sources.length;null===n.node1?(n.node1=t,n.node1slot=l,e=-1):null===n.nodes?(n.nodes=[t],n.nodeslots=[l],e=0):(e=n.nodes.length,n.nodes.push(t),n.nodeslots.push(l));null===t.source1?(t.source1=n,t.source1slot=e):null===t.sources?(t.sources=[n],t.sourceslots=[e]):(t.sources.push(n),t.sourceslots.push(e))}(n.log)}(this),this.value}next(n){if(null!==a)if(this.pending!==o){if(n!==this.pending)throw new Error("conflicting changes: "+n+" !== "+this.pending)}else this.pending=n,c.changes.add(this);else null!==this.log?(this.pending=n,c.changes.add(this),y()):this.value=n;return n}}class t{constructor(){this.fn=null,this.age=-1,this.state=r,this.source1=null,this.source1slot=0,this.sources=null,this.sourceslots=null,this.owner=d,this.owned=null,this.cleanups=null}}class l{constructor(){this.items=[],this.count=0}reset(){this.count=0}add(n){this.items[this.count++]=n}run(n){for(var e=this.items,t=0;t<this.count;t++)n(e[t]),e[t]=null;this.count=0}}var o={},r=0,s=1,u=2,i=new t,c={time:0,changes:new l,updates:new l,disposes:new l},a=null,f=null,d=null,h=null;function p(){var n=h;return null===n?n=new t:h=null,n}function g(n,e,t,l){var o,r=l||null===d||d===i?null:d,s=!n.noRecycle&&null===n.source1&&(null===n.owned&&null===n.cleanups||null!==r);if(s){if(h=n,n.owner=null,null!==r){if(null!==n.owned){if(null===r.owned)r.owned=n.owned;else for(o=0;o<n.owned.length;o++)r.owned.push(n.owned[o]);n.owned=null}if(null!==n.cleanups){if(null===r.cleanups)r.cleanups=n.cleanups;else for(o=0;o<n.cleanups.length;o++)r.cleanups.push(n.cleanups[o]);n.cleanups=null}}}else n.fn=e,n.value=t,n.age=c.time,null!==r&&(null===r.owned?r.owned=[n]:r.owned.push(n));return s}function y(){var n=d;c.updates.reset(),c.time++;try{v(c)}finally{a=f=null,d=n}}function v(n){var e=a,t=0;for(a=n,n.disposes.reset();0!==n.changes.count||0!==n.updates.count||0!==n.disposes.count;)if(t>0&&n.time++,n.changes.run(m),n.updates.run(b),n.disposes.run(C),t++>1e5)throw new Error("Runaway clock detected");a=e}function m(n){n.value=n.pending,n.pending=o,n.log&&function(n){var e=n.node1,t=n.nodes;null!==e&&w(e);if(null!==t)for(var l=0,o=t.length;l<o;l++)w(t[l])}(n.log)}function w(n){var e=c.time;n.age<e&&(n.age=e,n.state=s,c.updates.add(n),null!==n.owned&&function n(e){for(var t=0;t<e.length;t++){var l=e[t];l.age=c.time,l.state=r,null!==l.owned&&n(l.owned)}}(n.owned))}function b(n){if(n.state===s){var e=d,t=f;d=f=n,n.state=u,A(n,!1),n.value=n.fn(n.value),n.state=r,d=e,f=t}}function A(n,e){var t,l,o=n.source1,r=n.sources,s=n.sourceslots,u=n.cleanups,i=n.owned;if(null!==u){for(t=0;t<u.length;t++)u[t](e);n.cleanups=null}if(null!==i){for(t=0;t<i.length;t++)C(i[t]);n.owned=null}if(null!==o&&(x(o,n.source1slot),n.source1=null),null!==r)for(t=0,l=r.length;t<l;t++)x(r.pop(),s.pop())}function x(n,e){var t,l,o=n.nodes,r=n.nodeslots;-1===e?n.node1=null:(t=o.pop(),l=r.pop(),e!==o.length&&(o[e]=t,r[e]=l,-1===l?t.source1slot=e:t.sourceslots[l]=e))}function C(n){n.fn=null,n.owner=null,A(n,!0)}const S=Symbol("solid-node"),N=Symbol("solid-proxy");function _(n){return n[N]||(n[N]=new Proxy(n,T))}function j(n){return null!==n&&"object"==typeof n&&(n.__proto__===Object.prototype||Array.isArray(n))}function k(n){let e,t,l;if(e=null!=n&&n._state)return e;if(!j(n))return n;if(Array.isArray(n)){Object.isFrozen(n)&&(n=n.slice(0));for(let e=0,o=n.length;e<o;e++)(t=k(l=n[e]))!==l&&(n[e]=t)}else{Object.isFrozen(n)&&(n=Object.assign({},n));let e=Object.keys(n);for(let o=0,r=e.length;o<r;o++)(t=k(l=n[e[o]]))!==l&&(n[e[o]]=t)}return n}function B(n){let e=n[S];return e||(n[S]=e={}),e}const T={get(n,t){if("_state"===t)return n;if(t===N||t===S)return;const l=n[t],o=j(l);if(null!==f&&"function"!=typeof l){let r,s;o&&(r=B(l))&&(s=r._self||(r._self=new e(void 0))).current(),(s=(r=B(n))[t]||(r[t]=new e(void 0))).current()}return o?_(l):l},set:()=>!0,deleteProperty:()=>!0};function O(n,e,t){if(t=k(t),n[e]===t)return;const l=Array.isArray(n)||!(e in n);void 0===t?delete n[e]:n[e]=t;let o,r=B(n);(o=r[e])&&o.next(),l&&(o=r._self)&&o.next()}function E(n,e){const t=Object.keys(e);for(let l=0;l<t.length;l+=1){const o=t[l];O(n,o,e[o])}}function F(n,e,t=[]){if(1===e.length){let l=e[0];if("function"==typeof l&&void 0===(l=l(_(n),t)))return;return void E(n,l)}const l=e.shift(),o=typeof l,r=Array.isArray(n);if(Array.isArray(l))for(let o=0;o<l.length;o++)F(n,[l[o]].concat(e),t.concat([l[o]]));else if(r&&"function"===o)for(let o=0;o<n.length;o++)l(n[o],o)&&F(n,[o].concat(e),t.concat([o]));else if(r&&"object"===o){const{from:o=0,to:r=n.length-1,by:s=1}=l;for(let l=o;l<=r;l+=s)F(n,[l].concat(e),t.concat([l]))}else if(1===e.length){let o=e[0];if("function"==typeof o){const e=n[l];o=o(j(e)?_(e):e,t.concat([l]))}j(n[l])&&j(o)&&!Array.isArray(o)?E(n[l],o):O(n,l,o)}else F(n[l],e,t.concat([l]))}function M(n){return[_(n=k(n||{})),function(){const e=arguments;!function(n){if(null!==a)n();else{(a=c).changes.reset();try{n(),y()}finally{a=null}}}(()=>{if(Array.isArray(e[0]))for(let t=0;t<e.length;t+=1)F(n,e[t]);else F(n,Array.prototype.slice.call(e))})}]}const P="__rGroup",$="previousSibling";let z=0;function R(e,t,l,o,r){if(Array.isArray(t)){if(!t.length)return;let n=(t=function n(e,t){for(let l=0,o=t.length;l<o;l++){let o=t[l];o instanceof Node?11===o.nodeType?n(e,o.childNodes):e.push(o):null==o||!0===o||!1===o||(Array.isArray(o)?n(e,o):"string"==typeof o?e.push(document.createTextNode(o)):e.push(document.createTextNode(o.toString())))}return e}([],t))[0];1!==t.length&&(n[P]=t[t.length-1][P]=o);for(let n=0;n<t.length;n++)l?e.insertBefore(t[n],l):e.appendChild(t[n]);return n}let s,u=typeof t;if(null==t||"string"===u||"number"===u)t=document.createTextNode(t||"");else{if("function"===u)return n(()=>{const n=t();if(n){let t=l;s&&(t=s.nextSibling,e.removeChild(s)),s=R(e,n,t,o,r)}}),s||(s=document.createTextNode(""),l?e.insertBefore(s,l):e.appendChild(s)),s;11===t.nodeType&&(s=t.firstChild)&&s!==t.lastChild&&(s[P]=t.lastChild[P]=o)}return l?e.insertBefore(t,l):e.appendChild(t),r&&r(s||t),s||t}function D(n,e,t,l){return void 0===t?n.textContent="":(Array.isArray(e)?l=e[0]:null!=e&&""!=e&&null==l&&(l=function(n,e,t){const l=n[P];if(l)for(n=n[e];n&&n[P]!==l;)n=n[e];return t?n:n[e]}(t&&t.previousSibling||n.lastChild,$,!0)),l&&function(n,e,t){let l;for(;e!==t;)l=e.nextSibling,n.removeChild(e),e=l}(n,l,t),"")}function G(n,e,t,l,o){if(e===t)return t;n=l&&l.parentNode||o&&o.parentNode||n;const r=typeof e;if("string"===r||"number"===r)if("number"===r&&(e=e.toString()),void 0!==l){const r=l&&l.previousSibling||o&&o.nextSibling||n.lastChild;if(""===e)D(n,t,l);else if(""!==t&&"string"==typeof t)r.data=e;else{const o=document.createTextNode(e);""!==t&&null!=t?n.replaceChild(o,r):n.insertBefore(o,l)}t=e}else t=""!==t&&"string"==typeof t?n.firstChild.data=e:n.textContent=e;else if(null==e||"boolean"===r)t=D(n,t,l);else{if(!(e instanceof Node||Array.isArray(e)))throw new Error("content must be Node, stringable, or array of same");""!==t&&null!=t&&D(n,t,l),R(n,e,l,++z),t=e}return t}function H(e,t,l,o){if("function"!=typeof t)return G(e,t,o,l);let r;void 0!==l&&(r=l?l.previousSibling:e.lastChild),n((n=o)=>G(e,t(),n,l,r))}const I=function(n){const e=document.createElement("template");return e.innerHTML=n,e}("<div class='box-view'><div class='box'></div></div>");function L(n){const e=[];for(let t=0;t<n;t++)e.push({top:0,left:0,color:null,content:0,count:0});return e}function q(n){const e=n.count+1;return{top:10*Math.sin(e/10),left:10*Math.cos(e/10),color:e%255,content:e%100,count:e}}let J;Benchmark.Framework.Solid={start(){!function(n,e){var t,l=d,o=0===n.length?null:function(){null===r||(null!==a?c.disposes.add(r):C(r))},r=null===o?i:p();let s=e||d;r!==s&&(r.owner=s),d=r;try{t=null===o?n():n(o)}finally{d=l}null!==o&&g(r,null,void 0,!0)&&(r=null)}(e=>{J=e,document.getElementById("grid").appendChild((()=>{const[e,t]=M({boxes:L(Benchmark.number)});return Benchmark.Framework.Solid.loop=()=>Promise.resolve().then(()=>t("boxes","*",q)),function(){const t=document.createDocumentFragment();return H(t,e.boxes.map((e,t)=>(function(){const l=I.content.firstChild.cloneNode(!0),o=l.firstChild;return o.id=t,n(()=>Object.assign(o.style,{top:`${e.top}px`,left:`${e.left}px`,background:`rgb(0,0,${e.color})`})),H(o,()=>e.content),l})())),t}()})())})},cleanup(){J&&J()}}}();
