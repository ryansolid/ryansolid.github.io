!function(){"use strict";function n(n,e){!function(n,e,t,l){var o=g(),r=d,s=f,u=null===a;d=o,f=l?null:o,e=u?function(n,e){a=c,c.changes.reset(),c.updates.reset();try{return n(e)}finally{d=f=a=null}}(n,e):n(e);d=r,f=s;var i=y(o,n,e,t);u&&function(n,e){if(c.changes.count>0||c.updates.count>0){c.time++;try{m(c)}finally{a=null,d=n,f=e}}}(r,s);p.node=i?null:o,p.value=e}(n,e,!1,!1)}class e{constructor(n){this.value=n,this.pending=o,this.log=null}current(){return null!==f&&function(n){null===n.log&&(n.log={node1:null,node1slot:0,nodes:null,nodeslots:null});v(n.log)}(this),this.value}next(n){if(null!==a)if(this.pending!==o){if(n!==this.pending)throw new Error("conflicting changes: "+n+" !== "+this.pending)}else this.pending=n,c.changes.add(this);else null!==this.log?(this.pending=n,c.changes.add(this),w()):this.value=n;return n}}class t{constructor(){this.fn=null,this.age=-1,this.state=r,this.source1=null,this.source1slot=0,this.sources=null,this.sourceslots=null,this.log=null,this.owner=d,this.owned=null,this.cleanups=null}current(){if(null!==f){if(this.age===c.time){if(this.state===u)throw new Error("circular dependency");C(this)}!function(n){null===n.log&&(n.log={node1:null,node1slot:0,nodes:null,nodeslots:null});v(n.log)}(this)}return this.value}}class l{constructor(){this.items=[],this.count=0}reset(){this.count=0}add(n){this.items[this.count++]=n}run(n){for(var e=this.items,t=0;t<this.count;t++)n(e[t]),e[t]=null;this.count=0}}var o={},r=0,s=1,u=2,i=new t,c={time:0,changes:new l,updates:new l,disposes:new l},a=null,f=null,d=null,h=null,p={node:null,value:void 0};function g(){var n=h;return null===n?n=new t:h=null,n}function y(n,e,t,l){var o,r=l||null===d||d===i?null:d,s=null===n.source1&&(null===n.owned&&null===n.cleanups||null!==r);if(s){if(h=n,null!==r){if(null!==n.owned){if(null===r.owned)r.owned=n.owned;else for(o=0;o<n.owned.length;o++)r.owned.push(n.owned[o]);n.owned=null}if(null!==n.cleanups){if(null===r.cleanups)r.cleanups=n.cleanups;else for(o=0;o<n.cleanups.length;o++)r.cleanups.push(n.cleanups[o]);n.cleanups=null}}}else n.fn=e,n.value=t,n.age=c.time,null!==r&&(null===r.owned?r.owned=[n]:r.owned.push(n));return s}function v(n){var e,t=f,l=null===t.source1?-1:null===t.sources?0:t.sources.length;null===n.node1?(n.node1=t,n.node1slot=l,e=-1):null===n.nodes?(n.nodes=[t],n.nodeslots=[l],e=0):(e=n.nodes.length,n.nodes.push(t),n.nodeslots.push(l)),null===t.source1?(t.source1=n,t.source1slot=e):null===t.sources?(t.sources=[n],t.sourceslots=[e]):(t.sources.push(n),t.sourceslots.push(e))}function w(){var n=d;c.updates.reset(),c.time++;try{m(c)}finally{a=f=null,d=n}}function m(n){var e=a,t=0;for(a=n,n.disposes.reset();0!==n.changes.count||0!==n.updates.count||0!==n.disposes.count;)if(t>0&&n.time++,n.changes.run(b),n.updates.run(C),n.disposes.run(S),t++>1e5)throw new Error("Runaway clock detected");a=e}function b(n){n.value=n.pending,n.pending=o,n.log&&A(n.log)}function A(n){var e=n.node1,t=n.nodes;if(null!==e&&x(e),null!==t)for(var l=0,o=t.length;l<o;l++)x(t[l])}function x(n){var e=c.time;n.age<e&&(n.age=e,n.state=s,c.updates.add(n),null!==n.owned&&function n(e){for(var t=0;t<e.length;t++){var l=e[t];l.age=c.time,l.state=r,null!==l.owned&&n(l.owned)}}(n.owned),null!==n.log&&A(n.log))}function C(n){if(n.state===s){var e=d,t=f;d=f=n,n.state=u,_(n,!1),n.value=n.fn(n.value),n.state=r,d=e,f=t}}function _(n,e){var t,l,o=n.source1,r=n.sources,s=n.sourceslots,u=n.cleanups,i=n.owned;if(null!==u){for(t=0;t<u.length;t++)u[t](e);n.cleanups=null}if(null!==i){for(t=0;t<i.length;t++)S(i[t]);n.owned=null}if(null!==o&&(N(o,n.source1slot),n.source1=null),null!==r)for(t=0,l=r.length;t<l;t++)N(r.pop(),s.pop())}function N(n,e){var t,l,o=n.nodes,r=n.nodeslots;-1===e?n.node1=null:(t=o.pop(),l=r.pop(),e!==o.length&&(o[e]=t,r[e]=l,-1===l?t.source1slot=e:t.sourceslots[l]=e))}function S(n){n.fn=null,n.log=null,n.owner=null,_(n,!0)}const j=Symbol("solid-node"),k=Symbol("solid-proxy");function B(n){return n[k]||(n[k]=new Proxy(n,F))}function O(n){return null!==n&&"object"==typeof n&&(n.__proto__===Object.prototype||Array.isArray(n))}function T(n){let e,t,l;if(e=null!=n&&n._state)return e;if(!O(n))return n;if(Array.isArray(n)){Object.isFrozen(n)&&(n=n.slice(0));for(let e=0,o=n.length;e<o;e++)(t=T(l=n[e]))!==l&&(n[e]=t)}else{Object.isFrozen(n)&&(n=Object.assign({},n));let e=Object.keys(n);for(let o=0,r=e.length;o<r;o++)(t=T(l=n[e[o]]))!==l&&(n[e[o]]=t)}return n}function E(n){let e=n[j];return e||(n[j]=e={}),e}const F={get(n,t){if("_state"===t)return n;if(t===k||t===j)return;const l=n[t],o=O(l);if(null!==f&&"function"!=typeof l){let r,s;o&&(r=E(l))&&(s=r._self||(r._self=new e(void 0))).current(),(s=(r=E(n))[t]||(r[t]=new e(void 0))).current()}return o?B(l):l},set:()=>!0,deleteProperty:()=>!0};function M(n,e,t){if(t=T(t),n[e]===t)return;const l=Array.isArray(n)||!(e in n);void 0===t?delete n[e]:n[e]=t;let o,r=E(n);(o=r[e])&&o.next(),l&&(o=r._self)&&o.next()}function P(n,e){const t=Object.keys(e);for(let l=0;l<t.length;l+=1){const o=t[l];M(n,o,e[o])}}function $(n,e,t=[]){if(1===e.length){let l=e[0];if("function"==typeof l&&void 0===(l=l(B(n),t)))return;return void P(n,l)}const l=e.shift(),o=typeof l,r=Array.isArray(n);if(Array.isArray(l))for(let o=0;o<l.length;o++)$(n,[l[o]].concat(e),t.concat([l[o]]));else if(r&&"function"===o)for(let o=0;o<n.length;o++)l(n[o],o)&&$(n,[o].concat(e),t.concat([o]));else if(r&&"object"===o){const{from:o=0,to:r=n.length-1,by:s=1}=l;for(let l=o;l<=r;l+=s)$(n,[l].concat(e),t.concat([l]))}else if(r&&"*"===l)for(let l=0;l<n.length;l++)$(n,[l].concat(e),t.concat([l]));else if(1===e.length){let o=e[0];if("function"==typeof o){const e=n[l];o=o(O(e)?B(e):e,t.concat([l]))}O(n[l])&&O(o)&&!Array.isArray(o)?P(n[l],o):M(n,l,o)}else $(n[l],e,t.concat([l]))}function z(n){return[B(n=T(n||{})),function(){const e=arguments;!function(n){if(null!==a)n();else{(a=c).changes.reset();try{n(),w()}finally{a=null}}}(()=>{if(Array.isArray(e[0]))for(let t=0;t<e.length;t+=1)$(n,e[t]);else $(n,Array.prototype.slice.call(e))})}]}const D="__rGroup",G="previousSibling";let H=0;function I(n,e,t,l){if(Array.isArray(e)){if(!e.length)return;let o=(e=function n(e,t){for(let l=0,o=t.length;l<o;l++){let o=t[l];o instanceof Node?11===o.nodeType?n(e,o.childNodes):e.push(o):null==o||!0===o||!1===o||(Array.isArray(o)?n(e,o):"string"==typeof o?e.push(document.createTextNode(o)):e.push(document.createTextNode(o.toString())))}return e}([],e))[0];1!==e.length&&(o[D]=e[e.length-1][D]=l);for(let l=0;l<e.length;l++)t?n.insertBefore(e[l],t):n.appendChild(e[l]);return o}let o,r=typeof e;return"string"===r||"number"===r?e=document.createTextNode(e):11===e.nodeType&&(o=e.firstChild)&&o!==e.lastChild&&(o[D]=e.lastChild[D]=l),t?n.insertBefore(e,t):n.appendChild(e),o||e}function L(n,e,t,l){return void 0===t?n.textContent="":(Array.isArray(e)?l=e[0]:null!=e&&""!=e&&void 0===l&&(l=function(n,e,t){const l=n[D];if(l)for(n=n[e];n&&n[D]!==l;)n=n[e];return t?n:n[e]}(t.previousSibling,G,!0)),l&&function(n,e,t){let l;for(;e!==t;)l=e.nextSibling,n.removeChild(e),e=l}(n,l,t),"")}function R(e,t,l,o){if(t===l)return l;e=o&&o.parentNode||e;const r=typeof t;if("string"===r||"number"===r)if("number"===r&&(t=t.toString()),void 0!==o){const n=o&&o.previousSibling||e.lastChild;if(""===t)L(e,l,o);else if(""!==l&&"string"==typeof l)n.data=t;else{const r=document.createTextNode(t);""!==l&&null!=l?e.replaceChild(r,n):e.insertBefore(r,o)}l=t}else l=""!==l&&"string"==typeof l?e.firstChild.data=t:e.textContent=t;else if(null==t||"boolean"===r)l=L(e,l,o);else if("function"===r)n(function(){l=R(e,t(),l,o)});else{if(!(t instanceof Node||Array.isArray(t)))throw new Error("content must be Node, stringable, or array of same");L(e,l,o),I(e,t,o,++H),l=t}return l}function q(e,t,l,o){if("function"!=typeof t)return R(e,t,l,o);n((n=l)=>R(e,t(),n,o))}const J=document.createElement("template");function K(n){const e=[];for(let t=0;t<n;t++)e.push({top:0,left:0,color:null,content:0,count:0});return e}function Q(n){const e=n.count+1;return{top:10*Math.sin(e/10),left:10*Math.cos(e/10),color:e%255,content:e%100,count:e}}J.innerHTML="<div class='box-view'><div class='box'></div></div>";let U;Benchmark.Framework.Solid={start(){!function(n,e){var t,l=d,o=0===n.length?null:function(){null===r||(null!==a?c.disposes.add(r):S(r))},r=null===o?i:g();r.owner=e||d,d=r;try{t=null===o?n():n(o)}finally{d=l}null!==o&&y(r,null,void 0,!0)&&(r=null)}(e=>{U=e,document.getElementById("grid").appendChild((()=>{const[e,t]=z({boxes:K(Benchmark.number)});return Benchmark.Framework.Solid.loop=()=>Promise.resolve().then(()=>t("boxes","*",Q)),function(){const t=document.createDocumentFragment();return q(t,e.boxes.map((e,t)=>(function(){const l=J.content.firstChild.cloneNode(!0),o=l.firstChild;return o.id=t,n(()=>Object.assign(o.style,{top:`${e.top}px`,left:`${e.left}px`,background:`rgb(0,0,${e.color})`})),q(o,()=>e.content),l})())),t}()})())})},cleanup(){U&&U()}}}();
