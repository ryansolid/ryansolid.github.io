!function(){"use strict";function n(n,t,e){var o=document.createElement(n);return t&&(o.className=t),e&&e.appendChild(o),o}new RegExp("^("+Object.keys({xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"}).join("|")+")-(.*)");var t=function(n,t){var e=new l(n,t);return function(){return e.current()}};Object.defineProperty(t,"default",{value:t}),t.root=function(n){var t=g,e=0===n.length?v:new l(null,null),o=void 0,u=0===n.length?null:function(){null!==d?h.disposes.add(e):C(e)};return g=e,null===d?o=function(n,t,e){try{return null===t?n():n(t)}finally{g=e}}(n,u,t):(o=null===u?n():n(u),g=t),o},t.on=function(n,e,o,u){var l;return Array.isArray(n)&&(l=n,n=function(){for(var n=0;n<l.length;n++)l[n]()}),u=!!u,t(r,o);function r(t){var o=p;return n(),u?u=!1:(p=null,t=e(t),p=o),t}},t.effect=function(n,t){new l(n,t)},t.data=function(n){var t=new u(n);return function(n){return 0===arguments.length?t.current():t.next(n)}},t.value=function(n,e){var o=t.data(n),u=-1;return function(t){if(0===arguments.length)return o();if(!(e?e(n,t):n===t)){var l=h.time;if(u===l)throw new Error("conflicting values: "+t+" is not the same as "+n);u=l,n=t,o(t)}return t}},t.freeze=function(n){var t=void 0;if(null!==d)t=n();else{(d=h).changes.reset();try{t=n(),m()}finally{d=null}}return t},t.sample=function(n){var t,e=p;return null!==e?(p=null,t=n(),p=e):t=n(),t},t.cleanup=function(n){null!==g?null===g.cleanups?g.cleanups=[n]:g.cleanups.push(n):console.warn("cleanups created without a root or parent will never be run")},t.makeDataNode=function(n){return new u(n)},t.makeComputationNode=function(n,t){return new l(n,t)},t.isFrozen=function(){return null!==d},t.isListening=function(){return null!==p};var e=function(){return function(){this.time=0,this.changes=new s,this.updates=new s,this.disposes=new s}}(),o={time:function(){return h.time}},u=function(){function n(n){this.value=n,this.pending=i,this.log=null}return n.prototype.current=function(){return null!==p&&function(n,t){null===n.log&&(n.log=new r);w(n.log,t)}(this,p),this.value},n.prototype.next=function(n){if(null!==d)if(this.pending!==i){if(n!==this.pending)throw new Error("conflicting changes: "+n+" !== "+this.pending)}else this.pending=n,h.changes.add(this);else null!==this.log?(this.pending=n,h.changes.add(this),m()):this.value=n;return n},n.prototype.clock=function(){return o},n}(),l=function(){function n(n,t){if(this.state=c,this.source1=null,this.source1slot=0,this.sources=null,this.sourceslots=null,this.log=null,this.owned=null,this.cleanups=null,this.fn=n,this.value=t,this.age=h.time,null!==n){var e=g,o=p;null===e&&console.warn("computations created without a root or parent will never be disposed"),g=p=this,null===d?function(n){d=h,h.changes.reset(),h.updates.reset();try{n.value=n.fn(n.value),(h.changes.count>0||h.updates.count>0)&&(h.time++,y(h))}finally{d=g=p=null}}(this):this.value=this.fn(this.value),e&&e!==v&&(null===e.owned?e.owned=[this]:e.owned.push(this)),g=e,p=o}}return n.prototype.current=function(){if(null!==p){if(this.age===h.time){if(this.state===f)throw new Error("circular dependency");E(this)}!function(n,t){null===n.log&&(n.log=new r);w(n.log,t)}(this,p)}return this.value},n.prototype.clock=function(){return o},n}(),r=function(){return function(){this.node1=null,this.node1slot=0,this.nodes=null,this.nodeslots=null}}(),s=function(){function n(){this.items=[],this.count=0}return n.prototype.reset=function(){this.count=0},n.prototype.add=function(n){this.items[this.count++]=n},n.prototype.run=function(n){for(var t=this.items,e=0;e<this.count;e++)n(t[e]),t[e]=null;this.count=0},n}(),i={},c=0,a=1,f=2,h=new e,d=null,p=null,g=null,v=new l(null,null);function w(n,t){var e,o=null===t.source1?-1:null===t.sources?0:t.sources.length;null===n.node1?(n.node1=t,n.node1slot=o,e=-1):null===n.nodes?(n.nodes=[t],n.nodeslots=[o],e=0):(e=n.nodes.length,n.nodes.push(t),n.nodeslots.push(o)),null===t.source1?(t.source1=n,t.source1slot=e):null===t.sources?(t.sources=[n],t.sourceslots=[e]):(t.sources.push(n),t.sourceslots.push(e))}function m(){var n=g;h.updates.reset(),h.time++;try{y(h)}finally{d=p=null,g=n}}function y(n){var t=d,e=0;for(d=n,n.disposes.reset();0!==n.changes.count||0!==n.updates.count||0!==n.disposes.count;)if(e>0&&n.time++,n.changes.run(k),n.updates.run(E),n.disposes.run(C),e++>1e5)throw new Error("Runaway clock detected");d=t}function k(n){n.value=n.pending,n.pending=i,n.log&&x(n.log)}function x(n){var t=n.node1,e=n.nodes;if(null!==t&&b(t),null!==e)for(var o=0,u=e.length;o<u;o++)b(e[o])}function b(n){var t=h.time;n.age<t&&(n.age=t,n.state=a,h.updates.add(n),null!==n.owned&&function n(t){for(var e=0;e<t.length;e++){var o=t[e];o.age=h.time,o.state=c,null!==o.owned&&n(o.owned)}}(n.owned),null!==n.log&&x(n.log))}function E(n){if(n.state===a){var t=g,e=p;g=p=n,n.state=f,j(n,!1),n.value=n.fn(n.value),n.state=c,g=t,p=e}}function j(n,t){var e,o,u=n.source1,l=n.sources,r=n.sourceslots,s=n.cleanups,i=n.owned;if(null!==s){for(e=0;e<s.length;e++)s[e](t);n.cleanups=null}if(null!==i){for(e=0;e<i.length;e++)C(i[e]);n.owned=null}if(null!==u&&(B(u,n.source1slot),n.source1=null),null!==l)for(e=0,o=l.length;e<o;e++)B(l.pop(),r.pop())}function B(n,t){var e,o,u=n.nodes,l=n.nodeslots;-1===t?n.node1=null:(e=u.pop(),o=l.pop(),t!==u.length&&(u[t]=e,l[t]=o,-1===o?e.source1slot=t:e.sourceslots[o]=t))}function C(n){n.fn=null,n.log=null,j(n,!0)}function N(n){const t=n.count()+1;n.top(10*Math.sin(t/10)),n.left(10*Math.cos(t/10)),n.color(t%255),n.content(t%100),n.count(t)}const z=()=>{const e=function(n){const e=[];for(let o=0;o<n;o++)e.push({top:t.data(0),left:t.data(0),content:t.data(0),count:t.data(0),color:t.data()});return e}(Benchmark.number);return Benchmark.Framework.Surplus.loop=(()=>Promise.resolve().then(()=>t.freeze(()=>e.forEach(N)))),e.map((e,o)=>(function(){var u,l;return u=n("div","box-view",null),l=n("div",null,u),t.effect(function(){l.className="box",l.id=o,l.textContent=e.content(),function(n,t){for(var e=Object.keys(t),o=0,u=e.length;o<u;o++){var l=e[o];n[l]=t[l]}}(l.style,{top:`${e.top()}px`,left:`${e.left()}px`,background:`rgb(0,0,${e.color()})`})}),u})())};let F;Benchmark.Framework.Surplus={start(){t.root(n=>{F=n;const t=document.getElementById("grid");z().forEach(n=>t.appendChild(n))})},cleanup(){F&&F()}}}();
