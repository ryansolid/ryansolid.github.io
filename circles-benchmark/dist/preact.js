!function(){"use strict";var e=function(){},t={},n=[],o=[];function r(t,r){var l,i,a,s,p=o;for(s=arguments.length;s-- >2;)n.push(arguments[s]);for(r&&null!=r.children&&(n.length||n.push(r.children),delete r.children);n.length;)if((i=n.pop())&&void 0!==i.pop)for(s=i.length;s--;)n.push(i[s]);else"boolean"==typeof i&&(i=null),(a="function"!=typeof t)&&(null==i?i="":"number"==typeof i?i=String(i):"string"!=typeof i&&(a=!1)),a&&l?p[p.length-1]+=i:p===o?p=[i]:p.push(i),l=a;var c=new e;return c.nodeName=t,c.children=p,c.attributes=null==r?void 0:r,c.key=null==r?void 0:r.key,c}function l(e,t){for(var n in t)e[n]=t[n];return e}function i(e,t){null!=e&&("function"==typeof e?e(t):e.current=t)}var a="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,s=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,p=[];function c(e){!e._dirty&&(e._dirty=!0)&&1==p.push(e)&&a(u)}function u(){for(var e;e=p.pop();)e._dirty&&L(e)}function d(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function f(e){var t=l({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var o in n)void 0===t[o]&&(t[o]=n[o]);return t}function m(e){var t=e.parentNode;t&&t.removeChild(e)}function v(e,t,n,o,r){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)i(n,null),i(o,e);else if("class"!==t||r)if("style"===t){if(o&&"string"!=typeof o&&"string"!=typeof n||(e.style.cssText=o||""),o&&"object"==typeof o){if("string"!=typeof n)for(var l in n)l in o||(e.style[l]="");for(var l in o)e.style[l]="number"==typeof o[l]&&!1===s.test(l)?o[l]+"px":o[l]}}else if("dangerouslySetInnerHTML"===t)o&&(e.innerHTML=o.__html||"");else if("o"==t[0]&&"n"==t[1]){var a=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),o?n||e.addEventListener(t,h,a):e.removeEventListener(t,h,a),(e._listeners||(e._listeners={}))[t]=o}else if("list"!==t&&"type"!==t&&!r&&t in e){try{e[t]=null==o?"":o}catch(e){}null!=o&&!1!==o||"spellcheck"==t||e.removeAttribute(t)}else{var p=r&&t!==(t=t.replace(/^xlink:?/,""));null==o||!1===o?p?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof o&&(p?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),o):e.setAttribute(t,o))}else e.className=o||""}function h(e){return this._listeners[e.type](e)}var _=[],y=0,b=!1,g=!1;function x(){for(var e;e=_.shift();)e.componentDidMount&&e.componentDidMount()}function C(e,t,n,o,r,l){y++||(b=null!=r&&void 0!==r.ownerSVGElement,g=null!=e&&!("__preactattr_"in e));var i=N(e,t,n,o,l);return r&&i.parentNode!==r&&r.appendChild(i),--y||(g=!1,l||x()),i}function N(e,t,n,o,r){var l=e,i=b;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||r)?e.nodeValue!=t&&(e.nodeValue=t):(l=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(l,e),k(e,!0))),l.__preactattr_=!0,l;var a,s,p=t.nodeName;if("function"==typeof p)return function(e,t,n,o){var r=e&&e._component,l=r,i=e,a=r&&e._componentConstructor===t.nodeName,s=a,p=f(t);for(;r&&!s&&(r=r._parentComponent);)s=r.constructor===t.nodeName;r&&s&&(!o||r._component)?(U(r,p,3,n,o),e=r.base):(l&&!a&&(T(l),e=i=null),r=B(t.nodeName,p,n),e&&!r.nextBase&&(r.nextBase=e,i=null),U(r,p,1,n,o),e=r.base,i&&e!==i&&(i._component=null,k(i,!1)));return e}(e,t,n,o);if(b="svg"===p||"foreignObject"!==p&&b,p=String(p),(!e||!d(e,p))&&(a=p,(s=b?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a)).normalizedNodeName=a,l=s,e)){for(;e.firstChild;)l.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(l,e),k(e,!0)}var c=l.firstChild,u=l.__preactattr_,h=t.children;if(null==u){u=l.__preactattr_={};for(var _=l.attributes,y=_.length;y--;)u[_[y].name]=_[y].value}return!g&&h&&1===h.length&&"string"==typeof h[0]&&null!=c&&void 0!==c.splitText&&null==c.nextSibling?c.nodeValue!=h[0]&&(c.nodeValue=h[0]):(h&&h.length||null!=c)&&function(e,t,n,o,r){var l,i,a,s,p,c=e.childNodes,u=[],f={},v=0,h=0,_=c.length,y=0,b=t?t.length:0;if(0!==_)for(var g=0;g<_;g++){var x=c[g],C=x.__preactattr_,w=b&&C?x._component?x._component.__key:C.key:null;null!=w?(v++,f[w]=x):(C||(void 0!==x.splitText?!r||x.nodeValue.trim():r))&&(u[y++]=x)}if(0!==b)for(var g=0;g<b;g++){s=t[g],p=null;var w=s.key;if(null!=w)v&&void 0!==f[w]&&(p=f[w],f[w]=void 0,v--);else if(h<y)for(l=h;l<y;l++)if(void 0!==u[l]&&(S=i=u[l],P=r,"string"==typeof(B=s)||"number"==typeof B?void 0!==S.splitText:"string"==typeof B.nodeName?!S._componentConstructor&&d(S,B.nodeName):P||S._componentConstructor===B.nodeName)){p=i,u[l]=void 0,l===y-1&&y--,l===h&&h++;break}p=N(p,s,n,o),a=c[g],p&&p!==e&&p!==a&&(null==a?e.appendChild(p):p===a.nextSibling?m(a):e.insertBefore(p,a))}var S,B,P;if(v)for(var g in f)void 0!==f[g]&&k(f[g],!1);for(;h<=y;)void 0!==(p=u[y--])&&k(p,!1)}(l,h,n,o,g||null!=u.dangerouslySetInnerHTML),function(e,t,n){var o;for(o in n)t&&null!=t[o]||null==n[o]||v(e,o,n[o],n[o]=void 0,b);for(o in t)"children"===o||"innerHTML"===o||o in n&&t[o]===("value"===o||"checked"===o?e[o]:n[o])||v(e,o,n[o],n[o]=t[o],b)}(l,t.attributes,u),b=i,l}function k(e,t){var n=e._component;n?T(n):(null!=e.__preactattr_&&i(e.__preactattr_.ref,null),!1!==t&&null!=e.__preactattr_||m(e),w(e))}function w(e){for(e=e.lastChild;e;){var t=e.previousSibling;k(e,!0),e=t}}var S=[];function B(e,t,n){var o,r=S.length;for(e.prototype&&e.prototype.render?(o=new e(t,n),M.call(o,t,n)):((o=new M(t,n)).constructor=e,o.render=P);r--;)if(S[r].constructor===e)return o.nextBase=S[r].nextBase,S.splice(r,1),o;return o}function P(e,t,n){return this.constructor(e,n)}function U(e,n,o,r,l){e._disable||(e._disable=!0,e.__ref=n.ref,e.__key=n.key,delete n.ref,delete n.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||l?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r)),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=n,e._disable=!1,0!==o&&(1!==o&&!1===t.syncComponentUpdates&&e.base?c(e):L(e,1,l)),i(e.__ref,e))}function L(e,t,n,o){if(!e._disable){var r,i,a,s=e.props,p=e.state,c=e.context,u=e.prevProps||s,d=e.prevState||p,m=e.prevContext||c,v=e.base,h=e.nextBase,b=v||h,g=e._component,N=!1,w=m;if(e.constructor.getDerivedStateFromProps&&(p=l(l({},p),e.constructor.getDerivedStateFromProps(s,p)),e.state=p),v&&(e.props=u,e.state=d,e.context=m,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(s,p,c)?N=!0:e.componentWillUpdate&&e.componentWillUpdate(s,p,c),e.props=s,e.state=p,e.context=c),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!N){r=e.render(s,p,c),e.getChildContext&&(c=l(l({},c),e.getChildContext())),v&&e.getSnapshotBeforeUpdate&&(w=e.getSnapshotBeforeUpdate(u,d));var S,P,M=r&&r.nodeName;if("function"==typeof M){var W=f(r);(i=g)&&i.constructor===M&&W.key==i.__key?U(i,W,1,c,!1):(S=i,e._component=i=B(M,W,c),i.nextBase=i.nextBase||h,i._parentComponent=e,U(i,W,0,c,!1),L(i,1,n,!0)),P=i.base}else a=b,(S=g)&&(a=e._component=null),(b||1===t)&&(a&&(a._component=null),P=C(a,r,c,n||!v,b&&b.parentNode,!0));if(b&&P!==b&&i!==g){var D=b.parentNode;D&&P!==D&&(D.replaceChild(P,b),S||(b._component=null,k(b,!1)))}if(S&&T(S),e.base=P,P&&!o){for(var E=e,V=e;V=V._parentComponent;)(E=V).base=P;P._component=E,P._componentConstructor=E.constructor}}for(!v||n?_.push(e):N||e.componentDidUpdate&&e.componentDidUpdate(u,d,w);e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);y||o||x()}}function T(e){var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?T(n):t&&(null!=t.__preactattr_&&i(t.__preactattr_.ref,null),e.nextBase=t,m(t),S.push(e),w(t)),i(e.__ref,null)}function M(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{},this._renderCallbacks=[]}function W(e,t,n){return C(n,e,{},!1,t,!1)}function D(e){const t=[];for(let n=0;n<e;n++)t.push({top:0,left:0,color:null,content:0,count:0});return t}function E(e){const t=e.count+1;return{top:10*Math.sin(t/10),left:10*Math.cos(t/10),color:t%255,content:t%100,count:t}}l(M.prototype,{setState:function(e,t){this.prevState||(this.prevState=this.state),this.state=l(l({},this.state),"function"==typeof e?e(this.state,this.props):e),t&&this._renderCallbacks.push(t),c(this)},forceUpdate:function(e){e&&this._renderCallbacks.push(e),L(this,2)},render:function(){}});class V extends M{constructor(){super(...arguments),this.state={boxes:D(Benchmark.number)},Benchmark.Framework.Preact.loop=(()=>this.setState({boxes:this.state.boxes.map(E)}))}render(){return r("span",null,this.state.boxes.map((e,t)=>r("div",{className:"box-view",key:t},r("div",{className:"box",id:t,style:{top:`${e.top}px`,left:`${e.left}px`,background:`rgb(0,0,${e.color})`}},e.content))))}}Benchmark.Framework.Preact={start(){W(r(V,null),document.getElementById("grid"))},cleanup(){W(null,document.getElementById("grid"))}}}();
